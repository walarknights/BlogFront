{
  "version": 3,
  "sources": ["../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/compose.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/request/constants.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/utils/body.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/utils/url.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/request.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/utils/html.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/context.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/router.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/utils/constants.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/hono-base.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/router/reg-exp-router/matcher.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/router/reg-exp-router/node.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/router/reg-exp-router/trie.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/router/reg-exp-router/router.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/router/smart-router/router.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/router/trie-router/node.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/router/trie-router/router.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/hono.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/middleware/cors/index.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/utils/encode.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/utils/jwt/jwa.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/helper/adapter/index.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/utils/jwt/types.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/utils/jwt/utf8.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/utils/jwt/jws.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/utils/jwt/jwt.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/utils/jwt/index.js", "../../../node_modules/.pnpm/hono@4.10.7/node_modules/hono/dist/middleware/jwt/jwt.js", "../../../node_modules/.pnpm/aws4fetch@1.0.20/node_modules/aws4fetch/dist/aws4fetch.esm.mjs", "../../../src/server/users/index.ts", "../../../src/server/article/index.ts", "../../../src/server/personal/index.ts", "../../../src/server/test/index.ts", "../../../functions/_worker.ts", "file:///C:/Users/29151/AppData/Local/pnpm/global/5/.pnpm/wrangler@4.51.0/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "file:///C:/Users/29151/AppData/Local/pnpm/global/5/.pnpm/wrangler@4.51.0/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-Tuzo8f/middleware-insertion-facade.js", "file:///C:/Users/29151/AppData/Local/pnpm/global/5/.pnpm/wrangler@4.51.0/node_modules/wrangler/templates/middleware/common.ts", "../bundle-Tuzo8f/middleware-loader.entry.ts"],
  "sourceRoot": "E:\\PracticalTraining\\quasar-project\\.wrangler\\tmp\\dev-r5Dzv8",
  "sourcesContent": ["// src/compose.ts\nvar compose = (middleware, onError, onNotFound) => {\n  return (context, next) => {\n    let index = -1;\n    return dispatch(0);\n    async function dispatch(i) {\n      if (i <= index) {\n        throw new Error(\"next() called multiple times\");\n      }\n      index = i;\n      let res;\n      let isError = false;\n      let handler;\n      if (middleware[i]) {\n        handler = middleware[i][0][0];\n        context.req.routeIndex = i;\n      } else {\n        handler = i === middleware.length && next || void 0;\n      }\n      if (handler) {\n        try {\n          res = await handler(context, () => dispatch(i + 1));\n        } catch (err) {\n          if (err instanceof Error && onError) {\n            context.error = err;\n            res = await onError(err, context);\n            isError = true;\n          } else {\n            throw err;\n          }\n        }\n      } else {\n        if (context.finalized === false && onNotFound) {\n          res = await onNotFound(context);\n        }\n      }\n      if (res && (context.finalized === false || isError)) {\n        context.res = res;\n      }\n      return context;\n    }\n  };\n};\nexport {\n  compose\n};\n", "// src/request/constants.ts\nvar GET_MATCH_RESULT = Symbol();\nexport {\n  GET_MATCH_RESULT\n};\n", "// src/utils/body.ts\nimport { HonoRequest } from \"../request.js\";\nvar parseBody = async (request, options = /* @__PURE__ */ Object.create(null)) => {\n  const { all = false, dot = false } = options;\n  const headers = request instanceof HonoRequest ? request.raw.headers : request.headers;\n  const contentType = headers.get(\"Content-Type\");\n  if (contentType?.startsWith(\"multipart/form-data\") || contentType?.startsWith(\"application/x-www-form-urlencoded\")) {\n    return parseFormData(request, { all, dot });\n  }\n  return {};\n};\nasync function parseFormData(request, options) {\n  const formData = await request.formData();\n  if (formData) {\n    return convertFormDataToBodyData(formData, options);\n  }\n  return {};\n}\nfunction convertFormDataToBodyData(formData, options) {\n  const form = /* @__PURE__ */ Object.create(null);\n  formData.forEach((value, key) => {\n    const shouldParseAllValues = options.all || key.endsWith(\"[]\");\n    if (!shouldParseAllValues) {\n      form[key] = value;\n    } else {\n      handleParsingAllValues(form, key, value);\n    }\n  });\n  if (options.dot) {\n    Object.entries(form).forEach(([key, value]) => {\n      const shouldParseDotValues = key.includes(\".\");\n      if (shouldParseDotValues) {\n        handleParsingNestedValues(form, key, value);\n        delete form[key];\n      }\n    });\n  }\n  return form;\n}\nvar handleParsingAllValues = (form, key, value) => {\n  if (form[key] !== void 0) {\n    if (Array.isArray(form[key])) {\n      ;\n      form[key].push(value);\n    } else {\n      form[key] = [form[key], value];\n    }\n  } else {\n    if (!key.endsWith(\"[]\")) {\n      form[key] = value;\n    } else {\n      form[key] = [value];\n    }\n  }\n};\nvar handleParsingNestedValues = (form, key, value) => {\n  let nestedForm = form;\n  const keys = key.split(\".\");\n  keys.forEach((key2, index) => {\n    if (index === keys.length - 1) {\n      nestedForm[key2] = value;\n    } else {\n      if (!nestedForm[key2] || typeof nestedForm[key2] !== \"object\" || Array.isArray(nestedForm[key2]) || nestedForm[key2] instanceof File) {\n        nestedForm[key2] = /* @__PURE__ */ Object.create(null);\n      }\n      nestedForm = nestedForm[key2];\n    }\n  });\n};\nexport {\n  parseBody\n};\n", "// src/utils/url.ts\nvar splitPath = (path) => {\n  const paths = path.split(\"/\");\n  if (paths[0] === \"\") {\n    paths.shift();\n  }\n  return paths;\n};\nvar splitRoutingPath = (routePath) => {\n  const { groups, path } = extractGroupsFromPath(routePath);\n  const paths = splitPath(path);\n  return replaceGroupMarks(paths, groups);\n};\nvar extractGroupsFromPath = (path) => {\n  const groups = [];\n  path = path.replace(/\\{[^}]+\\}/g, (match, index) => {\n    const mark = `@${index}`;\n    groups.push([mark, match]);\n    return mark;\n  });\n  return { groups, path };\n};\nvar replaceGroupMarks = (paths, groups) => {\n  for (let i = groups.length - 1; i >= 0; i--) {\n    const [mark] = groups[i];\n    for (let j = paths.length - 1; j >= 0; j--) {\n      if (paths[j].includes(mark)) {\n        paths[j] = paths[j].replace(mark, groups[i][1]);\n        break;\n      }\n    }\n  }\n  return paths;\n};\nvar patternCache = {};\nvar getPattern = (label, next) => {\n  if (label === \"*\") {\n    return \"*\";\n  }\n  const match = label.match(/^\\:([^\\{\\}]+)(?:\\{(.+)\\})?$/);\n  if (match) {\n    const cacheKey = `${label}#${next}`;\n    if (!patternCache[cacheKey]) {\n      if (match[2]) {\n        patternCache[cacheKey] = next && next[0] !== \":\" && next[0] !== \"*\" ? [cacheKey, match[1], new RegExp(`^${match[2]}(?=/${next})`)] : [label, match[1], new RegExp(`^${match[2]}$`)];\n      } else {\n        patternCache[cacheKey] = [label, match[1], true];\n      }\n    }\n    return patternCache[cacheKey];\n  }\n  return null;\n};\nvar tryDecode = (str, decoder) => {\n  try {\n    return decoder(str);\n  } catch {\n    return str.replace(/(?:%[0-9A-Fa-f]{2})+/g, (match) => {\n      try {\n        return decoder(match);\n      } catch {\n        return match;\n      }\n    });\n  }\n};\nvar tryDecodeURI = (str) => tryDecode(str, decodeURI);\nvar getPath = (request) => {\n  const url = request.url;\n  const start = url.indexOf(\"/\", url.indexOf(\":\") + 4);\n  let i = start;\n  for (; i < url.length; i++) {\n    const charCode = url.charCodeAt(i);\n    if (charCode === 37) {\n      const queryIndex = url.indexOf(\"?\", i);\n      const path = url.slice(start, queryIndex === -1 ? void 0 : queryIndex);\n      return tryDecodeURI(path.includes(\"%25\") ? path.replace(/%25/g, \"%2525\") : path);\n    } else if (charCode === 63) {\n      break;\n    }\n  }\n  return url.slice(start, i);\n};\nvar getQueryStrings = (url) => {\n  const queryIndex = url.indexOf(\"?\", 8);\n  return queryIndex === -1 ? \"\" : \"?\" + url.slice(queryIndex + 1);\n};\nvar getPathNoStrict = (request) => {\n  const result = getPath(request);\n  return result.length > 1 && result.at(-1) === \"/\" ? result.slice(0, -1) : result;\n};\nvar mergePath = (base, sub, ...rest) => {\n  if (rest.length) {\n    sub = mergePath(sub, ...rest);\n  }\n  return `${base?.[0] === \"/\" ? \"\" : \"/\"}${base}${sub === \"/\" ? \"\" : `${base?.at(-1) === \"/\" ? \"\" : \"/\"}${sub?.[0] === \"/\" ? sub.slice(1) : sub}`}`;\n};\nvar checkOptionalParameter = (path) => {\n  if (path.charCodeAt(path.length - 1) !== 63 || !path.includes(\":\")) {\n    return null;\n  }\n  const segments = path.split(\"/\");\n  const results = [];\n  let basePath = \"\";\n  segments.forEach((segment) => {\n    if (segment !== \"\" && !/\\:/.test(segment)) {\n      basePath += \"/\" + segment;\n    } else if (/\\:/.test(segment)) {\n      if (/\\?/.test(segment)) {\n        if (results.length === 0 && basePath === \"\") {\n          results.push(\"/\");\n        } else {\n          results.push(basePath);\n        }\n        const optionalSegment = segment.replace(\"?\", \"\");\n        basePath += \"/\" + optionalSegment;\n        results.push(basePath);\n      } else {\n        basePath += \"/\" + segment;\n      }\n    }\n  });\n  return results.filter((v, i, a) => a.indexOf(v) === i);\n};\nvar _decodeURI = (value) => {\n  if (!/[%+]/.test(value)) {\n    return value;\n  }\n  if (value.indexOf(\"+\") !== -1) {\n    value = value.replace(/\\+/g, \" \");\n  }\n  return value.indexOf(\"%\") !== -1 ? tryDecode(value, decodeURIComponent_) : value;\n};\nvar _getQueryParam = (url, key, multiple) => {\n  let encoded;\n  if (!multiple && key && !/[%+]/.test(key)) {\n    let keyIndex2 = url.indexOf(\"?\", 8);\n    if (keyIndex2 === -1) {\n      return void 0;\n    }\n    if (!url.startsWith(key, keyIndex2 + 1)) {\n      keyIndex2 = url.indexOf(`&${key}`, keyIndex2 + 1);\n    }\n    while (keyIndex2 !== -1) {\n      const trailingKeyCode = url.charCodeAt(keyIndex2 + key.length + 1);\n      if (trailingKeyCode === 61) {\n        const valueIndex = keyIndex2 + key.length + 2;\n        const endIndex = url.indexOf(\"&\", valueIndex);\n        return _decodeURI(url.slice(valueIndex, endIndex === -1 ? void 0 : endIndex));\n      } else if (trailingKeyCode == 38 || isNaN(trailingKeyCode)) {\n        return \"\";\n      }\n      keyIndex2 = url.indexOf(`&${key}`, keyIndex2 + 1);\n    }\n    encoded = /[%+]/.test(url);\n    if (!encoded) {\n      return void 0;\n    }\n  }\n  const results = {};\n  encoded ??= /[%+]/.test(url);\n  let keyIndex = url.indexOf(\"?\", 8);\n  while (keyIndex !== -1) {\n    const nextKeyIndex = url.indexOf(\"&\", keyIndex + 1);\n    let valueIndex = url.indexOf(\"=\", keyIndex);\n    if (valueIndex > nextKeyIndex && nextKeyIndex !== -1) {\n      valueIndex = -1;\n    }\n    let name = url.slice(\n      keyIndex + 1,\n      valueIndex === -1 ? nextKeyIndex === -1 ? void 0 : nextKeyIndex : valueIndex\n    );\n    if (encoded) {\n      name = _decodeURI(name);\n    }\n    keyIndex = nextKeyIndex;\n    if (name === \"\") {\n      continue;\n    }\n    let value;\n    if (valueIndex === -1) {\n      value = \"\";\n    } else {\n      value = url.slice(valueIndex + 1, nextKeyIndex === -1 ? void 0 : nextKeyIndex);\n      if (encoded) {\n        value = _decodeURI(value);\n      }\n    }\n    if (multiple) {\n      if (!(results[name] && Array.isArray(results[name]))) {\n        results[name] = [];\n      }\n      ;\n      results[name].push(value);\n    } else {\n      results[name] ??= value;\n    }\n  }\n  return key ? results[key] : results;\n};\nvar getQueryParam = _getQueryParam;\nvar getQueryParams = (url, key) => {\n  return _getQueryParam(url, key, true);\n};\nvar decodeURIComponent_ = decodeURIComponent;\nexport {\n  checkOptionalParameter,\n  decodeURIComponent_,\n  getPath,\n  getPathNoStrict,\n  getPattern,\n  getQueryParam,\n  getQueryParams,\n  getQueryStrings,\n  mergePath,\n  splitPath,\n  splitRoutingPath,\n  tryDecode\n};\n", "// src/request.ts\nimport { HTTPException } from \"./http-exception.js\";\nimport { GET_MATCH_RESULT } from \"./request/constants.js\";\nimport { parseBody } from \"./utils/body.js\";\nimport { decodeURIComponent_, getQueryParam, getQueryParams, tryDecode } from \"./utils/url.js\";\nvar tryDecodeURIComponent = (str) => tryDecode(str, decodeURIComponent_);\nvar HonoRequest = class {\n  raw;\n  #validatedData;\n  #matchResult;\n  routeIndex = 0;\n  path;\n  bodyCache = {};\n  constructor(request, path = \"/\", matchResult = [[]]) {\n    this.raw = request;\n    this.path = path;\n    this.#matchResult = matchResult;\n    this.#validatedData = {};\n  }\n  param(key) {\n    return key ? this.#getDecodedParam(key) : this.#getAllDecodedParams();\n  }\n  #getDecodedParam(key) {\n    const paramKey = this.#matchResult[0][this.routeIndex][1][key];\n    const param = this.#getParamValue(paramKey);\n    return param && /\\%/.test(param) ? tryDecodeURIComponent(param) : param;\n  }\n  #getAllDecodedParams() {\n    const decoded = {};\n    const keys = Object.keys(this.#matchResult[0][this.routeIndex][1]);\n    for (const key of keys) {\n      const value = this.#getParamValue(this.#matchResult[0][this.routeIndex][1][key]);\n      if (value !== void 0) {\n        decoded[key] = /\\%/.test(value) ? tryDecodeURIComponent(value) : value;\n      }\n    }\n    return decoded;\n  }\n  #getParamValue(paramKey) {\n    return this.#matchResult[1] ? this.#matchResult[1][paramKey] : paramKey;\n  }\n  query(key) {\n    return getQueryParam(this.url, key);\n  }\n  queries(key) {\n    return getQueryParams(this.url, key);\n  }\n  header(name) {\n    if (name) {\n      return this.raw.headers.get(name) ?? void 0;\n    }\n    const headerData = {};\n    this.raw.headers.forEach((value, key) => {\n      headerData[key] = value;\n    });\n    return headerData;\n  }\n  async parseBody(options) {\n    return this.bodyCache.parsedBody ??= await parseBody(this, options);\n  }\n  #cachedBody = (key) => {\n    const { bodyCache, raw } = this;\n    const cachedBody = bodyCache[key];\n    if (cachedBody) {\n      return cachedBody;\n    }\n    const anyCachedKey = Object.keys(bodyCache)[0];\n    if (anyCachedKey) {\n      return bodyCache[anyCachedKey].then((body) => {\n        if (anyCachedKey === \"json\") {\n          body = JSON.stringify(body);\n        }\n        return new Response(body)[key]();\n      });\n    }\n    return bodyCache[key] = raw[key]();\n  };\n  json() {\n    return this.#cachedBody(\"text\").then((text) => JSON.parse(text));\n  }\n  text() {\n    return this.#cachedBody(\"text\");\n  }\n  arrayBuffer() {\n    return this.#cachedBody(\"arrayBuffer\");\n  }\n  blob() {\n    return this.#cachedBody(\"blob\");\n  }\n  formData() {\n    return this.#cachedBody(\"formData\");\n  }\n  addValidatedData(target, data) {\n    this.#validatedData[target] = data;\n  }\n  valid(target) {\n    return this.#validatedData[target];\n  }\n  get url() {\n    return this.raw.url;\n  }\n  get method() {\n    return this.raw.method;\n  }\n  get [GET_MATCH_RESULT]() {\n    return this.#matchResult;\n  }\n  get matchedRoutes() {\n    return this.#matchResult[0].map(([[, route]]) => route);\n  }\n  get routePath() {\n    return this.#matchResult[0].map(([[, route]]) => route)[this.routeIndex].path;\n  }\n};\nvar cloneRawRequest = async (req) => {\n  if (!req.raw.bodyUsed) {\n    return req.raw.clone();\n  }\n  const cacheKey = Object.keys(req.bodyCache)[0];\n  if (!cacheKey) {\n    throw new HTTPException(500, {\n      message: \"Cannot clone request: body was already consumed and not cached. Please use HonoRequest methods (e.g., req.json(), req.text()) instead of consuming req.raw directly.\"\n    });\n  }\n  const requestInit = {\n    body: await req[cacheKey](),\n    cache: req.raw.cache,\n    credentials: req.raw.credentials,\n    headers: req.header(),\n    integrity: req.raw.integrity,\n    keepalive: req.raw.keepalive,\n    method: req.method,\n    mode: req.raw.mode,\n    redirect: req.raw.redirect,\n    referrer: req.raw.referrer,\n    referrerPolicy: req.raw.referrerPolicy,\n    signal: req.raw.signal\n  };\n  return new Request(req.url, requestInit);\n};\nexport {\n  HonoRequest,\n  cloneRawRequest\n};\n", "// src/utils/html.ts\nvar HtmlEscapedCallbackPhase = {\n  Stringify: 1,\n  BeforeStream: 2,\n  Stream: 3\n};\nvar raw = (value, callbacks) => {\n  const escapedString = new String(value);\n  escapedString.isEscaped = true;\n  escapedString.callbacks = callbacks;\n  return escapedString;\n};\nvar escapeRe = /[&<>'\"]/;\nvar stringBufferToString = async (buffer, callbacks) => {\n  let str = \"\";\n  callbacks ||= [];\n  const resolvedBuffer = await Promise.all(buffer);\n  for (let i = resolvedBuffer.length - 1; ; i--) {\n    str += resolvedBuffer[i];\n    i--;\n    if (i < 0) {\n      break;\n    }\n    let r = resolvedBuffer[i];\n    if (typeof r === \"object\") {\n      callbacks.push(...r.callbacks || []);\n    }\n    const isEscaped = r.isEscaped;\n    r = await (typeof r === \"object\" ? r.toString() : r);\n    if (typeof r === \"object\") {\n      callbacks.push(...r.callbacks || []);\n    }\n    if (r.isEscaped ?? isEscaped) {\n      str += r;\n    } else {\n      const buf = [str];\n      escapeToBuffer(r, buf);\n      str = buf[0];\n    }\n  }\n  return raw(str, callbacks);\n};\nvar escapeToBuffer = (str, buffer) => {\n  const match = str.search(escapeRe);\n  if (match === -1) {\n    buffer[0] += str;\n    return;\n  }\n  let escape;\n  let index;\n  let lastIndex = 0;\n  for (index = match; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34:\n        escape = \"&quot;\";\n        break;\n      case 39:\n        escape = \"&#39;\";\n        break;\n      case 38:\n        escape = \"&amp;\";\n        break;\n      case 60:\n        escape = \"&lt;\";\n        break;\n      case 62:\n        escape = \"&gt;\";\n        break;\n      default:\n        continue;\n    }\n    buffer[0] += str.substring(lastIndex, index) + escape;\n    lastIndex = index + 1;\n  }\n  buffer[0] += str.substring(lastIndex, index);\n};\nvar resolveCallbackSync = (str) => {\n  const callbacks = str.callbacks;\n  if (!callbacks?.length) {\n    return str;\n  }\n  const buffer = [str];\n  const context = {};\n  callbacks.forEach((c) => c({ phase: HtmlEscapedCallbackPhase.Stringify, buffer, context }));\n  return buffer[0];\n};\nvar resolveCallback = async (str, phase, preserveCallbacks, context, buffer) => {\n  if (typeof str === \"object\" && !(str instanceof String)) {\n    if (!(str instanceof Promise)) {\n      str = str.toString();\n    }\n    if (str instanceof Promise) {\n      str = await str;\n    }\n  }\n  const callbacks = str.callbacks;\n  if (!callbacks?.length) {\n    return Promise.resolve(str);\n  }\n  if (buffer) {\n    buffer[0] += str;\n  } else {\n    buffer = [str];\n  }\n  const resStr = Promise.all(callbacks.map((c) => c({ phase, buffer, context }))).then(\n    (res) => Promise.all(\n      res.filter(Boolean).map((str2) => resolveCallback(str2, phase, false, context, buffer))\n    ).then(() => buffer[0])\n  );\n  if (preserveCallbacks) {\n    return raw(await resStr, callbacks);\n  } else {\n    return resStr;\n  }\n};\nexport {\n  HtmlEscapedCallbackPhase,\n  escapeToBuffer,\n  raw,\n  resolveCallback,\n  resolveCallbackSync,\n  stringBufferToString\n};\n", "// src/context.ts\nimport { HonoRequest } from \"./request.js\";\nimport { HtmlEscapedCallbackPhase, resolveCallback } from \"./utils/html.js\";\nvar TEXT_PLAIN = \"text/plain; charset=UTF-8\";\nvar setDefaultContentType = (contentType, headers) => {\n  return {\n    \"Content-Type\": contentType,\n    ...headers\n  };\n};\nvar Context = class {\n  #rawRequest;\n  #req;\n  env = {};\n  #var;\n  finalized = false;\n  error;\n  #status;\n  #executionCtx;\n  #res;\n  #layout;\n  #renderer;\n  #notFoundHandler;\n  #preparedHeaders;\n  #matchResult;\n  #path;\n  constructor(req, options) {\n    this.#rawRequest = req;\n    if (options) {\n      this.#executionCtx = options.executionCtx;\n      this.env = options.env;\n      this.#notFoundHandler = options.notFoundHandler;\n      this.#path = options.path;\n      this.#matchResult = options.matchResult;\n    }\n  }\n  get req() {\n    this.#req ??= new HonoRequest(this.#rawRequest, this.#path, this.#matchResult);\n    return this.#req;\n  }\n  get event() {\n    if (this.#executionCtx && \"respondWith\" in this.#executionCtx) {\n      return this.#executionCtx;\n    } else {\n      throw Error(\"This context has no FetchEvent\");\n    }\n  }\n  get executionCtx() {\n    if (this.#executionCtx) {\n      return this.#executionCtx;\n    } else {\n      throw Error(\"This context has no ExecutionContext\");\n    }\n  }\n  get res() {\n    return this.#res ||= new Response(null, {\n      headers: this.#preparedHeaders ??= new Headers()\n    });\n  }\n  set res(_res) {\n    if (this.#res && _res) {\n      _res = new Response(_res.body, _res);\n      for (const [k, v] of this.#res.headers.entries()) {\n        if (k === \"content-type\") {\n          continue;\n        }\n        if (k === \"set-cookie\") {\n          const cookies = this.#res.headers.getSetCookie();\n          _res.headers.delete(\"set-cookie\");\n          for (const cookie of cookies) {\n            _res.headers.append(\"set-cookie\", cookie);\n          }\n        } else {\n          _res.headers.set(k, v);\n        }\n      }\n    }\n    this.#res = _res;\n    this.finalized = true;\n  }\n  render = (...args) => {\n    this.#renderer ??= (content) => this.html(content);\n    return this.#renderer(...args);\n  };\n  setLayout = (layout) => this.#layout = layout;\n  getLayout = () => this.#layout;\n  setRenderer = (renderer) => {\n    this.#renderer = renderer;\n  };\n  header = (name, value, options) => {\n    if (this.finalized) {\n      this.#res = new Response(this.#res.body, this.#res);\n    }\n    const headers = this.#res ? this.#res.headers : this.#preparedHeaders ??= new Headers();\n    if (value === void 0) {\n      headers.delete(name);\n    } else if (options?.append) {\n      headers.append(name, value);\n    } else {\n      headers.set(name, value);\n    }\n  };\n  status = (status) => {\n    this.#status = status;\n  };\n  set = (key, value) => {\n    this.#var ??= /* @__PURE__ */ new Map();\n    this.#var.set(key, value);\n  };\n  get = (key) => {\n    return this.#var ? this.#var.get(key) : void 0;\n  };\n  get var() {\n    if (!this.#var) {\n      return {};\n    }\n    return Object.fromEntries(this.#var);\n  }\n  #newResponse(data, arg, headers) {\n    const responseHeaders = this.#res ? new Headers(this.#res.headers) : this.#preparedHeaders ?? new Headers();\n    if (typeof arg === \"object\" && \"headers\" in arg) {\n      const argHeaders = arg.headers instanceof Headers ? arg.headers : new Headers(arg.headers);\n      for (const [key, value] of argHeaders) {\n        if (key.toLowerCase() === \"set-cookie\") {\n          responseHeaders.append(key, value);\n        } else {\n          responseHeaders.set(key, value);\n        }\n      }\n    }\n    if (headers) {\n      for (const [k, v] of Object.entries(headers)) {\n        if (typeof v === \"string\") {\n          responseHeaders.set(k, v);\n        } else {\n          responseHeaders.delete(k);\n          for (const v2 of v) {\n            responseHeaders.append(k, v2);\n          }\n        }\n      }\n    }\n    const status = typeof arg === \"number\" ? arg : arg?.status ?? this.#status;\n    return new Response(data, { status, headers: responseHeaders });\n  }\n  newResponse = (...args) => this.#newResponse(...args);\n  body = (data, arg, headers) => this.#newResponse(data, arg, headers);\n  text = (text, arg, headers) => {\n    return !this.#preparedHeaders && !this.#status && !arg && !headers && !this.finalized ? new Response(text) : this.#newResponse(\n      text,\n      arg,\n      setDefaultContentType(TEXT_PLAIN, headers)\n    );\n  };\n  json = (object, arg, headers) => {\n    return this.#newResponse(\n      JSON.stringify(object),\n      arg,\n      setDefaultContentType(\"application/json\", headers)\n    );\n  };\n  html = (html, arg, headers) => {\n    const res = (html2) => this.#newResponse(html2, arg, setDefaultContentType(\"text/html; charset=UTF-8\", headers));\n    return typeof html === \"object\" ? resolveCallback(html, HtmlEscapedCallbackPhase.Stringify, false, {}).then(res) : res(html);\n  };\n  redirect = (location, status) => {\n    const locationString = String(location);\n    this.header(\n      \"Location\",\n      !/[^\\x00-\\xFF]/.test(locationString) ? locationString : encodeURI(locationString)\n    );\n    return this.newResponse(null, status ?? 302);\n  };\n  notFound = () => {\n    this.#notFoundHandler ??= () => new Response();\n    return this.#notFoundHandler(this);\n  };\n};\nexport {\n  Context,\n  TEXT_PLAIN\n};\n", "// src/router.ts\nvar METHOD_NAME_ALL = \"ALL\";\nvar METHOD_NAME_ALL_LOWERCASE = \"all\";\nvar METHODS = [\"get\", \"post\", \"put\", \"delete\", \"options\", \"patch\"];\nvar MESSAGE_MATCHER_IS_ALREADY_BUILT = \"Can not add a route since the matcher is already built.\";\nvar UnsupportedPathError = class extends Error {\n};\nexport {\n  MESSAGE_MATCHER_IS_ALREADY_BUILT,\n  METHODS,\n  METHOD_NAME_ALL,\n  METHOD_NAME_ALL_LOWERCASE,\n  UnsupportedPathError\n};\n", "// src/utils/constants.ts\nvar COMPOSED_HANDLER = \"__COMPOSED_HANDLER\";\nexport {\n  COMPOSED_HANDLER\n};\n", "// src/hono-base.ts\nimport { compose } from \"./compose.js\";\nimport { Context } from \"./context.js\";\nimport { METHODS, METHOD_NAME_ALL, METHOD_NAME_ALL_LOWERCASE } from \"./router.js\";\nimport { COMPOSED_HANDLER } from \"./utils/constants.js\";\nimport { getPath, getPathNoStrict, mergePath } from \"./utils/url.js\";\nvar notFoundHandler = (c) => {\n  return c.text(\"404 Not Found\", 404);\n};\nvar errorHandler = (err, c) => {\n  if (\"getResponse\" in err) {\n    const res = err.getResponse();\n    return c.newResponse(res.body, res);\n  }\n  console.error(err);\n  return c.text(\"Internal Server Error\", 500);\n};\nvar Hono = class {\n  get;\n  post;\n  put;\n  delete;\n  options;\n  patch;\n  all;\n  on;\n  use;\n  router;\n  getPath;\n  _basePath = \"/\";\n  #path = \"/\";\n  routes = [];\n  constructor(options = {}) {\n    const allMethods = [...METHODS, METHOD_NAME_ALL_LOWERCASE];\n    allMethods.forEach((method) => {\n      this[method] = (args1, ...args) => {\n        if (typeof args1 === \"string\") {\n          this.#path = args1;\n        } else {\n          this.#addRoute(method, this.#path, args1);\n        }\n        args.forEach((handler) => {\n          this.#addRoute(method, this.#path, handler);\n        });\n        return this;\n      };\n    });\n    this.on = (method, path, ...handlers) => {\n      for (const p of [path].flat()) {\n        this.#path = p;\n        for (const m of [method].flat()) {\n          handlers.map((handler) => {\n            this.#addRoute(m.toUpperCase(), this.#path, handler);\n          });\n        }\n      }\n      return this;\n    };\n    this.use = (arg1, ...handlers) => {\n      if (typeof arg1 === \"string\") {\n        this.#path = arg1;\n      } else {\n        this.#path = \"*\";\n        handlers.unshift(arg1);\n      }\n      handlers.forEach((handler) => {\n        this.#addRoute(METHOD_NAME_ALL, this.#path, handler);\n      });\n      return this;\n    };\n    const { strict, ...optionsWithoutStrict } = options;\n    Object.assign(this, optionsWithoutStrict);\n    this.getPath = strict ?? true ? options.getPath ?? getPath : getPathNoStrict;\n  }\n  #clone() {\n    const clone = new Hono({\n      router: this.router,\n      getPath: this.getPath\n    });\n    clone.errorHandler = this.errorHandler;\n    clone.#notFoundHandler = this.#notFoundHandler;\n    clone.routes = this.routes;\n    return clone;\n  }\n  #notFoundHandler = notFoundHandler;\n  errorHandler = errorHandler;\n  route(path, app) {\n    const subApp = this.basePath(path);\n    app.routes.map((r) => {\n      let handler;\n      if (app.errorHandler === errorHandler) {\n        handler = r.handler;\n      } else {\n        handler = async (c, next) => (await compose([], app.errorHandler)(c, () => r.handler(c, next))).res;\n        handler[COMPOSED_HANDLER] = r.handler;\n      }\n      subApp.#addRoute(r.method, r.path, handler);\n    });\n    return this;\n  }\n  basePath(path) {\n    const subApp = this.#clone();\n    subApp._basePath = mergePath(this._basePath, path);\n    return subApp;\n  }\n  onError = (handler) => {\n    this.errorHandler = handler;\n    return this;\n  };\n  notFound = (handler) => {\n    this.#notFoundHandler = handler;\n    return this;\n  };\n  mount(path, applicationHandler, options) {\n    let replaceRequest;\n    let optionHandler;\n    if (options) {\n      if (typeof options === \"function\") {\n        optionHandler = options;\n      } else {\n        optionHandler = options.optionHandler;\n        if (options.replaceRequest === false) {\n          replaceRequest = (request) => request;\n        } else {\n          replaceRequest = options.replaceRequest;\n        }\n      }\n    }\n    const getOptions = optionHandler ? (c) => {\n      const options2 = optionHandler(c);\n      return Array.isArray(options2) ? options2 : [options2];\n    } : (c) => {\n      let executionContext = void 0;\n      try {\n        executionContext = c.executionCtx;\n      } catch {\n      }\n      return [c.env, executionContext];\n    };\n    replaceRequest ||= (() => {\n      const mergedPath = mergePath(this._basePath, path);\n      const pathPrefixLength = mergedPath === \"/\" ? 0 : mergedPath.length;\n      return (request) => {\n        const url = new URL(request.url);\n        url.pathname = url.pathname.slice(pathPrefixLength) || \"/\";\n        return new Request(url, request);\n      };\n    })();\n    const handler = async (c, next) => {\n      const res = await applicationHandler(replaceRequest(c.req.raw), ...getOptions(c));\n      if (res) {\n        return res;\n      }\n      await next();\n    };\n    this.#addRoute(METHOD_NAME_ALL, mergePath(path, \"*\"), handler);\n    return this;\n  }\n  #addRoute(method, path, handler) {\n    method = method.toUpperCase();\n    path = mergePath(this._basePath, path);\n    const r = { basePath: this._basePath, path, method, handler };\n    this.router.add(method, path, [handler, r]);\n    this.routes.push(r);\n  }\n  #handleError(err, c) {\n    if (err instanceof Error) {\n      return this.errorHandler(err, c);\n    }\n    throw err;\n  }\n  #dispatch(request, executionCtx, env, method) {\n    if (method === \"HEAD\") {\n      return (async () => new Response(null, await this.#dispatch(request, executionCtx, env, \"GET\")))();\n    }\n    const path = this.getPath(request, { env });\n    const matchResult = this.router.match(method, path);\n    const c = new Context(request, {\n      path,\n      matchResult,\n      env,\n      executionCtx,\n      notFoundHandler: this.#notFoundHandler\n    });\n    if (matchResult[0].length === 1) {\n      let res;\n      try {\n        res = matchResult[0][0][0][0](c, async () => {\n          c.res = await this.#notFoundHandler(c);\n        });\n      } catch (err) {\n        return this.#handleError(err, c);\n      }\n      return res instanceof Promise ? res.then(\n        (resolved) => resolved || (c.finalized ? c.res : this.#notFoundHandler(c))\n      ).catch((err) => this.#handleError(err, c)) : res ?? this.#notFoundHandler(c);\n    }\n    const composed = compose(matchResult[0], this.errorHandler, this.#notFoundHandler);\n    return (async () => {\n      try {\n        const context = await composed(c);\n        if (!context.finalized) {\n          throw new Error(\n            \"Context is not finalized. Did you forget to return a Response object or `await next()`?\"\n          );\n        }\n        return context.res;\n      } catch (err) {\n        return this.#handleError(err, c);\n      }\n    })();\n  }\n  fetch = (request, ...rest) => {\n    return this.#dispatch(request, rest[1], rest[0], request.method);\n  };\n  request = (input, requestInit, Env, executionCtx) => {\n    if (input instanceof Request) {\n      return this.fetch(requestInit ? new Request(input, requestInit) : input, Env, executionCtx);\n    }\n    input = input.toString();\n    return this.fetch(\n      new Request(\n        /^https?:\\/\\//.test(input) ? input : `http://localhost${mergePath(\"/\", input)}`,\n        requestInit\n      ),\n      Env,\n      executionCtx\n    );\n  };\n  fire = () => {\n    addEventListener(\"fetch\", (event) => {\n      event.respondWith(this.#dispatch(event.request, event, void 0, event.request.method));\n    });\n  };\n};\nexport {\n  Hono as HonoBase\n};\n", "// src/router/reg-exp-router/matcher.ts\nimport { METHOD_NAME_ALL } from \"../../router.js\";\nvar emptyParam = [];\nfunction match(method, path) {\n  const matchers = this.buildAllMatchers();\n  const match2 = (method2, path2) => {\n    const matcher = matchers[method2] || matchers[METHOD_NAME_ALL];\n    const staticMatch = matcher[2][path2];\n    if (staticMatch) {\n      return staticMatch;\n    }\n    const match3 = path2.match(matcher[0]);\n    if (!match3) {\n      return [[], emptyParam];\n    }\n    const index = match3.indexOf(\"\", 1);\n    return [matcher[1][index], match3];\n  };\n  this.match = match2;\n  return match2(method, path);\n}\nexport {\n  emptyParam,\n  match\n};\n", "// src/router/reg-exp-router/node.ts\nvar LABEL_REG_EXP_STR = \"[^/]+\";\nvar ONLY_WILDCARD_REG_EXP_STR = \".*\";\nvar TAIL_WILDCARD_REG_EXP_STR = \"(?:|/.*)\";\nvar PATH_ERROR = Symbol();\nvar regExpMetaChars = new Set(\".\\\\+*[^]$()\");\nfunction compareKey(a, b) {\n  if (a.length === 1) {\n    return b.length === 1 ? a < b ? -1 : 1 : -1;\n  }\n  if (b.length === 1) {\n    return 1;\n  }\n  if (a === ONLY_WILDCARD_REG_EXP_STR || a === TAIL_WILDCARD_REG_EXP_STR) {\n    return 1;\n  } else if (b === ONLY_WILDCARD_REG_EXP_STR || b === TAIL_WILDCARD_REG_EXP_STR) {\n    return -1;\n  }\n  if (a === LABEL_REG_EXP_STR) {\n    return 1;\n  } else if (b === LABEL_REG_EXP_STR) {\n    return -1;\n  }\n  return a.length === b.length ? a < b ? -1 : 1 : b.length - a.length;\n}\nvar Node = class {\n  #index;\n  #varIndex;\n  #children = /* @__PURE__ */ Object.create(null);\n  insert(tokens, index, paramMap, context, pathErrorCheckOnly) {\n    if (tokens.length === 0) {\n      if (this.#index !== void 0) {\n        throw PATH_ERROR;\n      }\n      if (pathErrorCheckOnly) {\n        return;\n      }\n      this.#index = index;\n      return;\n    }\n    const [token, ...restTokens] = tokens;\n    const pattern = token === \"*\" ? restTokens.length === 0 ? [\"\", \"\", ONLY_WILDCARD_REG_EXP_STR] : [\"\", \"\", LABEL_REG_EXP_STR] : token === \"/*\" ? [\"\", \"\", TAIL_WILDCARD_REG_EXP_STR] : token.match(/^\\:([^\\{\\}]+)(?:\\{(.+)\\})?$/);\n    let node;\n    if (pattern) {\n      const name = pattern[1];\n      let regexpStr = pattern[2] || LABEL_REG_EXP_STR;\n      if (name && pattern[2]) {\n        if (regexpStr === \".*\") {\n          throw PATH_ERROR;\n        }\n        regexpStr = regexpStr.replace(/^\\((?!\\?:)(?=[^)]+\\)$)/, \"(?:\");\n        if (/\\((?!\\?:)/.test(regexpStr)) {\n          throw PATH_ERROR;\n        }\n      }\n      node = this.#children[regexpStr];\n      if (!node) {\n        if (Object.keys(this.#children).some(\n          (k) => k !== ONLY_WILDCARD_REG_EXP_STR && k !== TAIL_WILDCARD_REG_EXP_STR\n        )) {\n          throw PATH_ERROR;\n        }\n        if (pathErrorCheckOnly) {\n          return;\n        }\n        node = this.#children[regexpStr] = new Node();\n        if (name !== \"\") {\n          node.#varIndex = context.varIndex++;\n        }\n      }\n      if (!pathErrorCheckOnly && name !== \"\") {\n        paramMap.push([name, node.#varIndex]);\n      }\n    } else {\n      node = this.#children[token];\n      if (!node) {\n        if (Object.keys(this.#children).some(\n          (k) => k.length > 1 && k !== ONLY_WILDCARD_REG_EXP_STR && k !== TAIL_WILDCARD_REG_EXP_STR\n        )) {\n          throw PATH_ERROR;\n        }\n        if (pathErrorCheckOnly) {\n          return;\n        }\n        node = this.#children[token] = new Node();\n      }\n    }\n    node.insert(restTokens, index, paramMap, context, pathErrorCheckOnly);\n  }\n  buildRegExpStr() {\n    const childKeys = Object.keys(this.#children).sort(compareKey);\n    const strList = childKeys.map((k) => {\n      const c = this.#children[k];\n      return (typeof c.#varIndex === \"number\" ? `(${k})@${c.#varIndex}` : regExpMetaChars.has(k) ? `\\\\${k}` : k) + c.buildRegExpStr();\n    });\n    if (typeof this.#index === \"number\") {\n      strList.unshift(`#${this.#index}`);\n    }\n    if (strList.length === 0) {\n      return \"\";\n    }\n    if (strList.length === 1) {\n      return strList[0];\n    }\n    return \"(?:\" + strList.join(\"|\") + \")\";\n  }\n};\nexport {\n  Node,\n  PATH_ERROR\n};\n", "// src/router/reg-exp-router/trie.ts\nimport { Node } from \"./node.js\";\nvar Trie = class {\n  #context = { varIndex: 0 };\n  #root = new Node();\n  insert(path, index, pathErrorCheckOnly) {\n    const paramAssoc = [];\n    const groups = [];\n    for (let i = 0; ; ) {\n      let replaced = false;\n      path = path.replace(/\\{[^}]+\\}/g, (m) => {\n        const mark = `@\\\\${i}`;\n        groups[i] = [mark, m];\n        i++;\n        replaced = true;\n        return mark;\n      });\n      if (!replaced) {\n        break;\n      }\n    }\n    const tokens = path.match(/(?::[^\\/]+)|(?:\\/\\*$)|./g) || [];\n    for (let i = groups.length - 1; i >= 0; i--) {\n      const [mark] = groups[i];\n      for (let j = tokens.length - 1; j >= 0; j--) {\n        if (tokens[j].indexOf(mark) !== -1) {\n          tokens[j] = tokens[j].replace(mark, groups[i][1]);\n          break;\n        }\n      }\n    }\n    this.#root.insert(tokens, index, paramAssoc, this.#context, pathErrorCheckOnly);\n    return paramAssoc;\n  }\n  buildRegExp() {\n    let regexp = this.#root.buildRegExpStr();\n    if (regexp === \"\") {\n      return [/^$/, [], []];\n    }\n    let captureIndex = 0;\n    const indexReplacementMap = [];\n    const paramReplacementMap = [];\n    regexp = regexp.replace(/#(\\d+)|@(\\d+)|\\.\\*\\$/g, (_, handlerIndex, paramIndex) => {\n      if (handlerIndex !== void 0) {\n        indexReplacementMap[++captureIndex] = Number(handlerIndex);\n        return \"$()\";\n      }\n      if (paramIndex !== void 0) {\n        paramReplacementMap[Number(paramIndex)] = ++captureIndex;\n        return \"\";\n      }\n      return \"\";\n    });\n    return [new RegExp(`^${regexp}`), indexReplacementMap, paramReplacementMap];\n  }\n};\nexport {\n  Trie\n};\n", "// src/router/reg-exp-router/router.ts\nimport {\n  MESSAGE_MATCHER_IS_ALREADY_BUILT,\n  METHOD_NAME_ALL,\n  UnsupportedPathError\n} from \"../../router.js\";\nimport { checkOptionalParameter } from \"../../utils/url.js\";\nimport { match, emptyParam } from \"./matcher.js\";\nimport { PATH_ERROR } from \"./node.js\";\nimport { Trie } from \"./trie.js\";\nvar nullMatcher = [/^$/, [], /* @__PURE__ */ Object.create(null)];\nvar wildcardRegExpCache = /* @__PURE__ */ Object.create(null);\nfunction buildWildcardRegExp(path) {\n  return wildcardRegExpCache[path] ??= new RegExp(\n    path === \"*\" ? \"\" : `^${path.replace(\n      /\\/\\*$|([.\\\\+*[^\\]$()])/g,\n      (_, metaChar) => metaChar ? `\\\\${metaChar}` : \"(?:|/.*)\"\n    )}$`\n  );\n}\nfunction clearWildcardRegExpCache() {\n  wildcardRegExpCache = /* @__PURE__ */ Object.create(null);\n}\nfunction buildMatcherFromPreprocessedRoutes(routes) {\n  const trie = new Trie();\n  const handlerData = [];\n  if (routes.length === 0) {\n    return nullMatcher;\n  }\n  const routesWithStaticPathFlag = routes.map(\n    (route) => [!/\\*|\\/:/.test(route[0]), ...route]\n  ).sort(\n    ([isStaticA, pathA], [isStaticB, pathB]) => isStaticA ? 1 : isStaticB ? -1 : pathA.length - pathB.length\n  );\n  const staticMap = /* @__PURE__ */ Object.create(null);\n  for (let i = 0, j = -1, len = routesWithStaticPathFlag.length; i < len; i++) {\n    const [pathErrorCheckOnly, path, handlers] = routesWithStaticPathFlag[i];\n    if (pathErrorCheckOnly) {\n      staticMap[path] = [handlers.map(([h]) => [h, /* @__PURE__ */ Object.create(null)]), emptyParam];\n    } else {\n      j++;\n    }\n    let paramAssoc;\n    try {\n      paramAssoc = trie.insert(path, j, pathErrorCheckOnly);\n    } catch (e) {\n      throw e === PATH_ERROR ? new UnsupportedPathError(path) : e;\n    }\n    if (pathErrorCheckOnly) {\n      continue;\n    }\n    handlerData[j] = handlers.map(([h, paramCount]) => {\n      const paramIndexMap = /* @__PURE__ */ Object.create(null);\n      paramCount -= 1;\n      for (; paramCount >= 0; paramCount--) {\n        const [key, value] = paramAssoc[paramCount];\n        paramIndexMap[key] = value;\n      }\n      return [h, paramIndexMap];\n    });\n  }\n  const [regexp, indexReplacementMap, paramReplacementMap] = trie.buildRegExp();\n  for (let i = 0, len = handlerData.length; i < len; i++) {\n    for (let j = 0, len2 = handlerData[i].length; j < len2; j++) {\n      const map = handlerData[i][j]?.[1];\n      if (!map) {\n        continue;\n      }\n      const keys = Object.keys(map);\n      for (let k = 0, len3 = keys.length; k < len3; k++) {\n        map[keys[k]] = paramReplacementMap[map[keys[k]]];\n      }\n    }\n  }\n  const handlerMap = [];\n  for (const i in indexReplacementMap) {\n    handlerMap[i] = handlerData[indexReplacementMap[i]];\n  }\n  return [regexp, handlerMap, staticMap];\n}\nfunction findMiddleware(middleware, path) {\n  if (!middleware) {\n    return void 0;\n  }\n  for (const k of Object.keys(middleware).sort((a, b) => b.length - a.length)) {\n    if (buildWildcardRegExp(k).test(path)) {\n      return [...middleware[k]];\n    }\n  }\n  return void 0;\n}\nvar RegExpRouter = class {\n  name = \"RegExpRouter\";\n  #middleware;\n  #routes;\n  constructor() {\n    this.#middleware = { [METHOD_NAME_ALL]: /* @__PURE__ */ Object.create(null) };\n    this.#routes = { [METHOD_NAME_ALL]: /* @__PURE__ */ Object.create(null) };\n  }\n  add(method, path, handler) {\n    const middleware = this.#middleware;\n    const routes = this.#routes;\n    if (!middleware || !routes) {\n      throw new Error(MESSAGE_MATCHER_IS_ALREADY_BUILT);\n    }\n    if (!middleware[method]) {\n      ;\n      [middleware, routes].forEach((handlerMap) => {\n        handlerMap[method] = /* @__PURE__ */ Object.create(null);\n        Object.keys(handlerMap[METHOD_NAME_ALL]).forEach((p) => {\n          handlerMap[method][p] = [...handlerMap[METHOD_NAME_ALL][p]];\n        });\n      });\n    }\n    if (path === \"/*\") {\n      path = \"*\";\n    }\n    const paramCount = (path.match(/\\/:/g) || []).length;\n    if (/\\*$/.test(path)) {\n      const re = buildWildcardRegExp(path);\n      if (method === METHOD_NAME_ALL) {\n        Object.keys(middleware).forEach((m) => {\n          middleware[m][path] ||= findMiddleware(middleware[m], path) || findMiddleware(middleware[METHOD_NAME_ALL], path) || [];\n        });\n      } else {\n        middleware[method][path] ||= findMiddleware(middleware[method], path) || findMiddleware(middleware[METHOD_NAME_ALL], path) || [];\n      }\n      Object.keys(middleware).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          Object.keys(middleware[m]).forEach((p) => {\n            re.test(p) && middleware[m][p].push([handler, paramCount]);\n          });\n        }\n      });\n      Object.keys(routes).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          Object.keys(routes[m]).forEach(\n            (p) => re.test(p) && routes[m][p].push([handler, paramCount])\n          );\n        }\n      });\n      return;\n    }\n    const paths = checkOptionalParameter(path) || [path];\n    for (let i = 0, len = paths.length; i < len; i++) {\n      const path2 = paths[i];\n      Object.keys(routes).forEach((m) => {\n        if (method === METHOD_NAME_ALL || method === m) {\n          routes[m][path2] ||= [\n            ...findMiddleware(middleware[m], path2) || findMiddleware(middleware[METHOD_NAME_ALL], path2) || []\n          ];\n          routes[m][path2].push([handler, paramCount - len + i + 1]);\n        }\n      });\n    }\n  }\n  match = match;\n  buildAllMatchers() {\n    const matchers = /* @__PURE__ */ Object.create(null);\n    Object.keys(this.#routes).concat(Object.keys(this.#middleware)).forEach((method) => {\n      matchers[method] ||= this.#buildMatcher(method);\n    });\n    this.#middleware = this.#routes = void 0;\n    clearWildcardRegExpCache();\n    return matchers;\n  }\n  #buildMatcher(method) {\n    const routes = [];\n    let hasOwnRoute = method === METHOD_NAME_ALL;\n    [this.#middleware, this.#routes].forEach((r) => {\n      const ownRoute = r[method] ? Object.keys(r[method]).map((path) => [path, r[method][path]]) : [];\n      if (ownRoute.length !== 0) {\n        hasOwnRoute ||= true;\n        routes.push(...ownRoute);\n      } else if (method !== METHOD_NAME_ALL) {\n        routes.push(\n          ...Object.keys(r[METHOD_NAME_ALL]).map((path) => [path, r[METHOD_NAME_ALL][path]])\n        );\n      }\n    });\n    if (!hasOwnRoute) {\n      return null;\n    } else {\n      return buildMatcherFromPreprocessedRoutes(routes);\n    }\n  }\n};\nexport {\n  RegExpRouter\n};\n", "// src/router/smart-router/router.ts\nimport { MESSAGE_MATCHER_IS_ALREADY_BUILT, UnsupportedPathError } from \"../../router.js\";\nvar SmartRouter = class {\n  name = \"SmartRouter\";\n  #routers = [];\n  #routes = [];\n  constructor(init) {\n    this.#routers = init.routers;\n  }\n  add(method, path, handler) {\n    if (!this.#routes) {\n      throw new Error(MESSAGE_MATCHER_IS_ALREADY_BUILT);\n    }\n    this.#routes.push([method, path, handler]);\n  }\n  match(method, path) {\n    if (!this.#routes) {\n      throw new Error(\"Fatal error\");\n    }\n    const routers = this.#routers;\n    const routes = this.#routes;\n    const len = routers.length;\n    let i = 0;\n    let res;\n    for (; i < len; i++) {\n      const router = routers[i];\n      try {\n        for (let i2 = 0, len2 = routes.length; i2 < len2; i2++) {\n          router.add(...routes[i2]);\n        }\n        res = router.match(method, path);\n      } catch (e) {\n        if (e instanceof UnsupportedPathError) {\n          continue;\n        }\n        throw e;\n      }\n      this.match = router.match.bind(router);\n      this.#routers = [router];\n      this.#routes = void 0;\n      break;\n    }\n    if (i === len) {\n      throw new Error(\"Fatal error\");\n    }\n    this.name = `SmartRouter + ${this.activeRouter.name}`;\n    return res;\n  }\n  get activeRouter() {\n    if (this.#routes || this.#routers.length !== 1) {\n      throw new Error(\"No active router has been determined yet.\");\n    }\n    return this.#routers[0];\n  }\n};\nexport {\n  SmartRouter\n};\n", "// src/router/trie-router/node.ts\nimport { METHOD_NAME_ALL } from \"../../router.js\";\nimport { getPattern, splitPath, splitRoutingPath } from \"../../utils/url.js\";\nvar emptyParams = /* @__PURE__ */ Object.create(null);\nvar Node = class {\n  #methods;\n  #children;\n  #patterns;\n  #order = 0;\n  #params = emptyParams;\n  constructor(method, handler, children) {\n    this.#children = children || /* @__PURE__ */ Object.create(null);\n    this.#methods = [];\n    if (method && handler) {\n      const m = /* @__PURE__ */ Object.create(null);\n      m[method] = { handler, possibleKeys: [], score: 0 };\n      this.#methods = [m];\n    }\n    this.#patterns = [];\n  }\n  insert(method, path, handler) {\n    this.#order = ++this.#order;\n    let curNode = this;\n    const parts = splitRoutingPath(path);\n    const possibleKeys = [];\n    for (let i = 0, len = parts.length; i < len; i++) {\n      const p = parts[i];\n      const nextP = parts[i + 1];\n      const pattern = getPattern(p, nextP);\n      const key = Array.isArray(pattern) ? pattern[0] : p;\n      if (key in curNode.#children) {\n        curNode = curNode.#children[key];\n        if (pattern) {\n          possibleKeys.push(pattern[1]);\n        }\n        continue;\n      }\n      curNode.#children[key] = new Node();\n      if (pattern) {\n        curNode.#patterns.push(pattern);\n        possibleKeys.push(pattern[1]);\n      }\n      curNode = curNode.#children[key];\n    }\n    curNode.#methods.push({\n      [method]: {\n        handler,\n        possibleKeys: possibleKeys.filter((v, i, a) => a.indexOf(v) === i),\n        score: this.#order\n      }\n    });\n    return curNode;\n  }\n  #getHandlerSets(node, method, nodeParams, params) {\n    const handlerSets = [];\n    for (let i = 0, len = node.#methods.length; i < len; i++) {\n      const m = node.#methods[i];\n      const handlerSet = m[method] || m[METHOD_NAME_ALL];\n      const processedSet = {};\n      if (handlerSet !== void 0) {\n        handlerSet.params = /* @__PURE__ */ Object.create(null);\n        handlerSets.push(handlerSet);\n        if (nodeParams !== emptyParams || params && params !== emptyParams) {\n          for (let i2 = 0, len2 = handlerSet.possibleKeys.length; i2 < len2; i2++) {\n            const key = handlerSet.possibleKeys[i2];\n            const processed = processedSet[handlerSet.score];\n            handlerSet.params[key] = params?.[key] && !processed ? params[key] : nodeParams[key] ?? params?.[key];\n            processedSet[handlerSet.score] = true;\n          }\n        }\n      }\n    }\n    return handlerSets;\n  }\n  search(method, path) {\n    const handlerSets = [];\n    this.#params = emptyParams;\n    const curNode = this;\n    let curNodes = [curNode];\n    const parts = splitPath(path);\n    const curNodesQueue = [];\n    for (let i = 0, len = parts.length; i < len; i++) {\n      const part = parts[i];\n      const isLast = i === len - 1;\n      const tempNodes = [];\n      for (let j = 0, len2 = curNodes.length; j < len2; j++) {\n        const node = curNodes[j];\n        const nextNode = node.#children[part];\n        if (nextNode) {\n          nextNode.#params = node.#params;\n          if (isLast) {\n            if (nextNode.#children[\"*\"]) {\n              handlerSets.push(\n                ...this.#getHandlerSets(nextNode.#children[\"*\"], method, node.#params)\n              );\n            }\n            handlerSets.push(...this.#getHandlerSets(nextNode, method, node.#params));\n          } else {\n            tempNodes.push(nextNode);\n          }\n        }\n        for (let k = 0, len3 = node.#patterns.length; k < len3; k++) {\n          const pattern = node.#patterns[k];\n          const params = node.#params === emptyParams ? {} : { ...node.#params };\n          if (pattern === \"*\") {\n            const astNode = node.#children[\"*\"];\n            if (astNode) {\n              handlerSets.push(...this.#getHandlerSets(astNode, method, node.#params));\n              astNode.#params = params;\n              tempNodes.push(astNode);\n            }\n            continue;\n          }\n          const [key, name, matcher] = pattern;\n          if (!part && !(matcher instanceof RegExp)) {\n            continue;\n          }\n          const child = node.#children[key];\n          const restPathString = parts.slice(i).join(\"/\");\n          if (matcher instanceof RegExp) {\n            const m = matcher.exec(restPathString);\n            if (m) {\n              params[name] = m[0];\n              handlerSets.push(...this.#getHandlerSets(child, method, node.#params, params));\n              if (Object.keys(child.#children).length) {\n                child.#params = params;\n                const componentCount = m[0].match(/\\//)?.length ?? 0;\n                const targetCurNodes = curNodesQueue[componentCount] ||= [];\n                targetCurNodes.push(child);\n              }\n              continue;\n            }\n          }\n          if (matcher === true || matcher.test(part)) {\n            params[name] = part;\n            if (isLast) {\n              handlerSets.push(...this.#getHandlerSets(child, method, params, node.#params));\n              if (child.#children[\"*\"]) {\n                handlerSets.push(\n                  ...this.#getHandlerSets(child.#children[\"*\"], method, params, node.#params)\n                );\n              }\n            } else {\n              child.#params = params;\n              tempNodes.push(child);\n            }\n          }\n        }\n      }\n      curNodes = tempNodes.concat(curNodesQueue.shift() ?? []);\n    }\n    if (handlerSets.length > 1) {\n      handlerSets.sort((a, b) => {\n        return a.score - b.score;\n      });\n    }\n    return [handlerSets.map(({ handler, params }) => [handler, params])];\n  }\n};\nexport {\n  Node\n};\n", "// src/router/trie-router/router.ts\nimport { checkOptionalParameter } from \"../../utils/url.js\";\nimport { Node } from \"./node.js\";\nvar TrieRouter = class {\n  name = \"TrieRouter\";\n  #node;\n  constructor() {\n    this.#node = new Node();\n  }\n  add(method, path, handler) {\n    const results = checkOptionalParameter(path);\n    if (results) {\n      for (let i = 0, len = results.length; i < len; i++) {\n        this.#node.insert(method, results[i], handler);\n      }\n      return;\n    }\n    this.#node.insert(method, path, handler);\n  }\n  match(method, path) {\n    return this.#node.search(method, path);\n  }\n};\nexport {\n  TrieRouter\n};\n", "// src/hono.ts\nimport { HonoBase } from \"./hono-base.js\";\nimport { RegExpRouter } from \"./router/reg-exp-router/index.js\";\nimport { SmartRouter } from \"./router/smart-router/index.js\";\nimport { TrieRouter } from \"./router/trie-router/index.js\";\nvar Hono = class extends HonoBase {\n  constructor(options = {}) {\n    super(options);\n    this.router = options.router ?? new SmartRouter({\n      routers: [new RegExpRouter(), new TrieRouter()]\n    });\n  }\n};\nexport {\n  Hono\n};\n", "// src/middleware/cors/index.ts\nvar cors = (options) => {\n  const defaults = {\n    origin: \"*\",\n    allowMethods: [\"GET\", \"HEAD\", \"PUT\", \"POST\", \"DELETE\", \"PATCH\"],\n    allowHeaders: [],\n    exposeHeaders: []\n  };\n  const opts = {\n    ...defaults,\n    ...options\n  };\n  const findAllowOrigin = ((optsOrigin) => {\n    if (typeof optsOrigin === \"string\") {\n      if (optsOrigin === \"*\") {\n        return () => optsOrigin;\n      } else {\n        return (origin) => optsOrigin === origin ? origin : null;\n      }\n    } else if (typeof optsOrigin === \"function\") {\n      return optsOrigin;\n    } else {\n      return (origin) => optsOrigin.includes(origin) ? origin : null;\n    }\n  })(opts.origin);\n  const findAllowMethods = ((optsAllowMethods) => {\n    if (typeof optsAllowMethods === \"function\") {\n      return optsAllowMethods;\n    } else if (Array.isArray(optsAllowMethods)) {\n      return () => optsAllowMethods;\n    } else {\n      return () => [];\n    }\n  })(opts.allowMethods);\n  return async function cors2(c, next) {\n    function set(key, value) {\n      c.res.headers.set(key, value);\n    }\n    const allowOrigin = await findAllowOrigin(c.req.header(\"origin\") || \"\", c);\n    if (allowOrigin) {\n      set(\"Access-Control-Allow-Origin\", allowOrigin);\n    }\n    if (opts.credentials) {\n      set(\"Access-Control-Allow-Credentials\", \"true\");\n    }\n    if (opts.exposeHeaders?.length) {\n      set(\"Access-Control-Expose-Headers\", opts.exposeHeaders.join(\",\"));\n    }\n    if (c.req.method === \"OPTIONS\") {\n      if (opts.origin !== \"*\") {\n        set(\"Vary\", \"Origin\");\n      }\n      if (opts.maxAge != null) {\n        set(\"Access-Control-Max-Age\", opts.maxAge.toString());\n      }\n      const allowMethods = await findAllowMethods(c.req.header(\"origin\") || \"\", c);\n      if (allowMethods.length) {\n        set(\"Access-Control-Allow-Methods\", allowMethods.join(\",\"));\n      }\n      let headers = opts.allowHeaders;\n      if (!headers?.length) {\n        const requestHeaders = c.req.header(\"Access-Control-Request-Headers\");\n        if (requestHeaders) {\n          headers = requestHeaders.split(/\\s*,\\s*/);\n        }\n      }\n      if (headers?.length) {\n        set(\"Access-Control-Allow-Headers\", headers.join(\",\"));\n        c.res.headers.append(\"Vary\", \"Access-Control-Request-Headers\");\n      }\n      c.res.headers.delete(\"Content-Length\");\n      c.res.headers.delete(\"Content-Type\");\n      return new Response(null, {\n        headers: c.res.headers,\n        status: 204,\n        statusText: \"No Content\"\n      });\n    }\n    await next();\n    if (opts.origin !== \"*\") {\n      c.header(\"Vary\", \"Origin\", { append: true });\n    }\n  };\n};\nexport {\n  cors\n};\n", "// src/utils/encode.ts\nvar decodeBase64Url = (str) => {\n  return decodeBase64(str.replace(/_|-/g, (m) => ({ _: \"/\", \"-\": \"+\" })[m] ?? m));\n};\nvar encodeBase64Url = (buf) => encodeBase64(buf).replace(/\\/|\\+/g, (m) => ({ \"/\": \"_\", \"+\": \"-\" })[m] ?? m);\nvar encodeBase64 = (buf) => {\n  let binary = \"\";\n  const bytes = new Uint8Array(buf);\n  for (let i = 0, len = bytes.length; i < len; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n  return btoa(binary);\n};\nvar decodeBase64 = (str) => {\n  const binary = atob(str);\n  const bytes = new Uint8Array(new ArrayBuffer(binary.length));\n  const half = binary.length / 2;\n  for (let i = 0, j = binary.length - 1; i <= half; i++, j--) {\n    bytes[i] = binary.charCodeAt(i);\n    bytes[j] = binary.charCodeAt(j);\n  }\n  return bytes;\n};\nexport {\n  decodeBase64,\n  decodeBase64Url,\n  encodeBase64,\n  encodeBase64Url\n};\n", "// src/utils/jwt/jwa.ts\nvar AlgorithmTypes = /* @__PURE__ */ ((AlgorithmTypes2) => {\n  AlgorithmTypes2[\"HS256\"] = \"HS256\";\n  AlgorithmTypes2[\"HS384\"] = \"HS384\";\n  AlgorithmTypes2[\"HS512\"] = \"HS512\";\n  AlgorithmTypes2[\"RS256\"] = \"RS256\";\n  AlgorithmTypes2[\"RS384\"] = \"RS384\";\n  AlgorithmTypes2[\"RS512\"] = \"RS512\";\n  AlgorithmTypes2[\"PS256\"] = \"PS256\";\n  AlgorithmTypes2[\"PS384\"] = \"PS384\";\n  AlgorithmTypes2[\"PS512\"] = \"PS512\";\n  AlgorithmTypes2[\"ES256\"] = \"ES256\";\n  AlgorithmTypes2[\"ES384\"] = \"ES384\";\n  AlgorithmTypes2[\"ES512\"] = \"ES512\";\n  AlgorithmTypes2[\"EdDSA\"] = \"EdDSA\";\n  return AlgorithmTypes2;\n})(AlgorithmTypes || {});\nexport {\n  AlgorithmTypes\n};\n", "// src/helper/adapter/index.ts\nvar env = (c, runtime) => {\n  const global = globalThis;\n  const globalEnv = global?.process?.env;\n  runtime ??= getRuntimeKey();\n  const runtimeEnvHandlers = {\n    bun: () => globalEnv,\n    node: () => globalEnv,\n    \"edge-light\": () => globalEnv,\n    deno: () => {\n      return Deno.env.toObject();\n    },\n    workerd: () => c.env,\n    fastly: () => ({}),\n    other: () => ({})\n  };\n  return runtimeEnvHandlers[runtime]();\n};\nvar knownUserAgents = {\n  deno: \"Deno\",\n  bun: \"Bun\",\n  workerd: \"Cloudflare-Workers\",\n  node: \"Node.js\"\n};\nvar getRuntimeKey = () => {\n  const global = globalThis;\n  const userAgentSupported = typeof navigator !== \"undefined\" && typeof navigator.userAgent === \"string\";\n  if (userAgentSupported) {\n    for (const [runtimeKey, userAgent] of Object.entries(knownUserAgents)) {\n      if (checkUserAgentEquals(userAgent)) {\n        return runtimeKey;\n      }\n    }\n  }\n  if (typeof global?.EdgeRuntime === \"string\") {\n    return \"edge-light\";\n  }\n  if (global?.fastly !== void 0) {\n    return \"fastly\";\n  }\n  if (global?.process?.release?.name === \"node\") {\n    return \"node\";\n  }\n  return \"other\";\n};\nvar checkUserAgentEquals = (platform) => {\n  const userAgent = navigator.userAgent;\n  return userAgent.startsWith(platform);\n};\nexport {\n  checkUserAgentEquals,\n  env,\n  getRuntimeKey,\n  knownUserAgents\n};\n", "// src/utils/jwt/types.ts\nvar JwtAlgorithmNotImplemented = class extends Error {\n  constructor(alg) {\n    super(`${alg} is not an implemented algorithm`);\n    this.name = \"JwtAlgorithmNotImplemented\";\n  }\n};\nvar JwtTokenInvalid = class extends Error {\n  constructor(token) {\n    super(`invalid JWT token: ${token}`);\n    this.name = \"JwtTokenInvalid\";\n  }\n};\nvar JwtTokenNotBefore = class extends Error {\n  constructor(token) {\n    super(`token (${token}) is being used before it's valid`);\n    this.name = \"JwtTokenNotBefore\";\n  }\n};\nvar JwtTokenExpired = class extends Error {\n  constructor(token) {\n    super(`token (${token}) expired`);\n    this.name = \"JwtTokenExpired\";\n  }\n};\nvar JwtTokenIssuedAt = class extends Error {\n  constructor(currentTimestamp, iat) {\n    super(\n      `Invalid \"iat\" claim, must be a valid number lower than \"${currentTimestamp}\" (iat: \"${iat}\")`\n    );\n    this.name = \"JwtTokenIssuedAt\";\n  }\n};\nvar JwtTokenIssuer = class extends Error {\n  constructor(expected, iss) {\n    super(`expected issuer \"${expected}\", got ${iss ? `\"${iss}\"` : \"none\"} `);\n    this.name = \"JwtTokenIssuer\";\n  }\n};\nvar JwtHeaderInvalid = class extends Error {\n  constructor(header) {\n    super(`jwt header is invalid: ${JSON.stringify(header)}`);\n    this.name = \"JwtHeaderInvalid\";\n  }\n};\nvar JwtHeaderRequiresKid = class extends Error {\n  constructor(header) {\n    super(`required \"kid\" in jwt header: ${JSON.stringify(header)}`);\n    this.name = \"JwtHeaderRequiresKid\";\n  }\n};\nvar JwtTokenSignatureMismatched = class extends Error {\n  constructor(token) {\n    super(`token(${token}) signature mismatched`);\n    this.name = \"JwtTokenSignatureMismatched\";\n  }\n};\nvar JwtPayloadRequiresAud = class extends Error {\n  constructor(payload) {\n    super(`required \"aud\" in jwt payload: ${JSON.stringify(payload)}`);\n    this.name = \"JwtPayloadRequiresAud\";\n  }\n};\nvar JwtTokenAudience = class extends Error {\n  constructor(expected, aud) {\n    super(\n      `expected audience \"${Array.isArray(expected) ? expected.join(\", \") : expected}\", got \"${aud}\"`\n    );\n    this.name = \"JwtTokenAudience\";\n  }\n};\nvar CryptoKeyUsage = /* @__PURE__ */ ((CryptoKeyUsage2) => {\n  CryptoKeyUsage2[\"Encrypt\"] = \"encrypt\";\n  CryptoKeyUsage2[\"Decrypt\"] = \"decrypt\";\n  CryptoKeyUsage2[\"Sign\"] = \"sign\";\n  CryptoKeyUsage2[\"Verify\"] = \"verify\";\n  CryptoKeyUsage2[\"DeriveKey\"] = \"deriveKey\";\n  CryptoKeyUsage2[\"DeriveBits\"] = \"deriveBits\";\n  CryptoKeyUsage2[\"WrapKey\"] = \"wrapKey\";\n  CryptoKeyUsage2[\"UnwrapKey\"] = \"unwrapKey\";\n  return CryptoKeyUsage2;\n})(CryptoKeyUsage || {});\nexport {\n  CryptoKeyUsage,\n  JwtAlgorithmNotImplemented,\n  JwtHeaderInvalid,\n  JwtHeaderRequiresKid,\n  JwtPayloadRequiresAud,\n  JwtTokenAudience,\n  JwtTokenExpired,\n  JwtTokenInvalid,\n  JwtTokenIssuedAt,\n  JwtTokenIssuer,\n  JwtTokenNotBefore,\n  JwtTokenSignatureMismatched\n};\n", "// src/utils/jwt/utf8.ts\nvar utf8Encoder = new TextEncoder();\nvar utf8Decoder = new TextDecoder();\nexport {\n  utf8Decoder,\n  utf8Encoder\n};\n", "// src/utils/jwt/jws.ts\nimport { getRuntimeKey } from \"../../helper/adapter/index.js\";\nimport { decodeBase64 } from \"../encode.js\";\nimport { CryptoKeyUsage, JwtAlgorithmNotImplemented } from \"./types.js\";\nimport { utf8Encoder } from \"./utf8.js\";\nasync function signing(privateKey, alg, data) {\n  const algorithm = getKeyAlgorithm(alg);\n  const cryptoKey = await importPrivateKey(privateKey, algorithm);\n  return await crypto.subtle.sign(algorithm, cryptoKey, data);\n}\nasync function verifying(publicKey, alg, signature, data) {\n  const algorithm = getKeyAlgorithm(alg);\n  const cryptoKey = await importPublicKey(publicKey, algorithm);\n  return await crypto.subtle.verify(algorithm, cryptoKey, signature, data);\n}\nfunction pemToBinary(pem) {\n  return decodeBase64(pem.replace(/-+(BEGIN|END).*/g, \"\").replace(/\\s/g, \"\"));\n}\nasync function importPrivateKey(key, alg) {\n  if (!crypto.subtle || !crypto.subtle.importKey) {\n    throw new Error(\"`crypto.subtle.importKey` is undefined. JWT auth middleware requires it.\");\n  }\n  if (isCryptoKey(key)) {\n    if (key.type !== \"private\" && key.type !== \"secret\") {\n      throw new Error(\n        `unexpected key type: CryptoKey.type is ${key.type}, expected private or secret`\n      );\n    }\n    return key;\n  }\n  const usages = [CryptoKeyUsage.Sign];\n  if (typeof key === \"object\") {\n    return await crypto.subtle.importKey(\"jwk\", key, alg, false, usages);\n  }\n  if (key.includes(\"PRIVATE\")) {\n    return await crypto.subtle.importKey(\"pkcs8\", pemToBinary(key), alg, false, usages);\n  }\n  return await crypto.subtle.importKey(\"raw\", utf8Encoder.encode(key), alg, false, usages);\n}\nasync function importPublicKey(key, alg) {\n  if (!crypto.subtle || !crypto.subtle.importKey) {\n    throw new Error(\"`crypto.subtle.importKey` is undefined. JWT auth middleware requires it.\");\n  }\n  if (isCryptoKey(key)) {\n    if (key.type === \"public\" || key.type === \"secret\") {\n      return key;\n    }\n    key = await exportPublicJwkFrom(key);\n  }\n  if (typeof key === \"string\" && key.includes(\"PRIVATE\")) {\n    const privateKey = await crypto.subtle.importKey(\"pkcs8\", pemToBinary(key), alg, true, [\n      CryptoKeyUsage.Sign\n    ]);\n    key = await exportPublicJwkFrom(privateKey);\n  }\n  const usages = [CryptoKeyUsage.Verify];\n  if (typeof key === \"object\") {\n    return await crypto.subtle.importKey(\"jwk\", key, alg, false, usages);\n  }\n  if (key.includes(\"PUBLIC\")) {\n    return await crypto.subtle.importKey(\"spki\", pemToBinary(key), alg, false, usages);\n  }\n  return await crypto.subtle.importKey(\"raw\", utf8Encoder.encode(key), alg, false, usages);\n}\nasync function exportPublicJwkFrom(privateKey) {\n  if (privateKey.type !== \"private\") {\n    throw new Error(`unexpected key type: ${privateKey.type}`);\n  }\n  if (!privateKey.extractable) {\n    throw new Error(\"unexpected private key is unextractable\");\n  }\n  const jwk = await crypto.subtle.exportKey(\"jwk\", privateKey);\n  const { kty } = jwk;\n  const { alg, e, n } = jwk;\n  const { crv, x, y } = jwk;\n  return { kty, alg, e, n, crv, x, y, key_ops: [CryptoKeyUsage.Verify] };\n}\nfunction getKeyAlgorithm(name) {\n  switch (name) {\n    case \"HS256\":\n      return {\n        name: \"HMAC\",\n        hash: {\n          name: \"SHA-256\"\n        }\n      };\n    case \"HS384\":\n      return {\n        name: \"HMAC\",\n        hash: {\n          name: \"SHA-384\"\n        }\n      };\n    case \"HS512\":\n      return {\n        name: \"HMAC\",\n        hash: {\n          name: \"SHA-512\"\n        }\n      };\n    case \"RS256\":\n      return {\n        name: \"RSASSA-PKCS1-v1_5\",\n        hash: {\n          name: \"SHA-256\"\n        }\n      };\n    case \"RS384\":\n      return {\n        name: \"RSASSA-PKCS1-v1_5\",\n        hash: {\n          name: \"SHA-384\"\n        }\n      };\n    case \"RS512\":\n      return {\n        name: \"RSASSA-PKCS1-v1_5\",\n        hash: {\n          name: \"SHA-512\"\n        }\n      };\n    case \"PS256\":\n      return {\n        name: \"RSA-PSS\",\n        hash: {\n          name: \"SHA-256\"\n        },\n        saltLength: 32\n      };\n    case \"PS384\":\n      return {\n        name: \"RSA-PSS\",\n        hash: {\n          name: \"SHA-384\"\n        },\n        saltLength: 48\n      };\n    case \"PS512\":\n      return {\n        name: \"RSA-PSS\",\n        hash: {\n          name: \"SHA-512\"\n        },\n        saltLength: 64\n      };\n    case \"ES256\":\n      return {\n        name: \"ECDSA\",\n        hash: {\n          name: \"SHA-256\"\n        },\n        namedCurve: \"P-256\"\n      };\n    case \"ES384\":\n      return {\n        name: \"ECDSA\",\n        hash: {\n          name: \"SHA-384\"\n        },\n        namedCurve: \"P-384\"\n      };\n    case \"ES512\":\n      return {\n        name: \"ECDSA\",\n        hash: {\n          name: \"SHA-512\"\n        },\n        namedCurve: \"P-521\"\n      };\n    case \"EdDSA\":\n      return {\n        name: \"Ed25519\",\n        namedCurve: \"Ed25519\"\n      };\n    default:\n      throw new JwtAlgorithmNotImplemented(name);\n  }\n}\nfunction isCryptoKey(key) {\n  const runtime = getRuntimeKey();\n  if (runtime === \"node\" && !!crypto.webcrypto) {\n    return key instanceof crypto.webcrypto.CryptoKey;\n  }\n  return key instanceof CryptoKey;\n}\nexport {\n  signing,\n  verifying\n};\n", "// src/utils/jwt/jwt.ts\nimport { decodeBase64Url, encodeBase64Url } from \"../../utils/encode.js\";\nimport { AlgorithmTypes } from \"./jwa.js\";\nimport { signing, verifying } from \"./jws.js\";\nimport {\n  JwtHeaderInvalid,\n  JwtHeaderRequiresKid,\n  JwtPayloadRequiresAud,\n  JwtTokenAudience,\n  JwtTokenExpired,\n  JwtTokenInvalid,\n  JwtTokenIssuedAt,\n  JwtTokenIssuer,\n  JwtTokenNotBefore,\n  JwtTokenSignatureMismatched\n} from \"./types.js\";\nimport { utf8Decoder, utf8Encoder } from \"./utf8.js\";\nvar encodeJwtPart = (part) => encodeBase64Url(utf8Encoder.encode(JSON.stringify(part)).buffer).replace(/=/g, \"\");\nvar encodeSignaturePart = (buf) => encodeBase64Url(buf).replace(/=/g, \"\");\nvar decodeJwtPart = (part) => JSON.parse(utf8Decoder.decode(decodeBase64Url(part)));\nfunction isTokenHeader(obj) {\n  if (typeof obj === \"object\" && obj !== null) {\n    const objWithAlg = obj;\n    return \"alg\" in objWithAlg && Object.values(AlgorithmTypes).includes(objWithAlg.alg) && (!(\"typ\" in objWithAlg) || objWithAlg.typ === \"JWT\");\n  }\n  return false;\n}\nvar sign = async (payload, privateKey, alg = \"HS256\") => {\n  const encodedPayload = encodeJwtPart(payload);\n  let encodedHeader;\n  if (typeof privateKey === \"object\" && \"alg\" in privateKey) {\n    alg = privateKey.alg;\n    encodedHeader = encodeJwtPart({ alg, typ: \"JWT\", kid: privateKey.kid });\n  } else {\n    encodedHeader = encodeJwtPart({ alg, typ: \"JWT\" });\n  }\n  const partialToken = `${encodedHeader}.${encodedPayload}`;\n  const signaturePart = await signing(privateKey, alg, utf8Encoder.encode(partialToken));\n  const signature = encodeSignaturePart(signaturePart);\n  return `${partialToken}.${signature}`;\n};\nvar verify = async (token, publicKey, algOrOptions) => {\n  const {\n    alg = \"HS256\",\n    iss,\n    nbf = true,\n    exp = true,\n    iat = true,\n    aud\n  } = typeof algOrOptions === \"string\" ? { alg: algOrOptions } : algOrOptions || {};\n  const tokenParts = token.split(\".\");\n  if (tokenParts.length !== 3) {\n    throw new JwtTokenInvalid(token);\n  }\n  const { header, payload } = decode(token);\n  if (!isTokenHeader(header)) {\n    throw new JwtHeaderInvalid(header);\n  }\n  const now = Date.now() / 1e3 | 0;\n  if (nbf && payload.nbf && payload.nbf > now) {\n    throw new JwtTokenNotBefore(token);\n  }\n  if (exp && payload.exp && payload.exp <= now) {\n    throw new JwtTokenExpired(token);\n  }\n  if (iat && payload.iat && now < payload.iat) {\n    throw new JwtTokenIssuedAt(now, payload.iat);\n  }\n  if (iss) {\n    if (!payload.iss) {\n      throw new JwtTokenIssuer(iss, null);\n    }\n    if (typeof iss === \"string\" && payload.iss !== iss) {\n      throw new JwtTokenIssuer(iss, payload.iss);\n    }\n    if (iss instanceof RegExp && !iss.test(payload.iss)) {\n      throw new JwtTokenIssuer(iss, payload.iss);\n    }\n  }\n  if (aud) {\n    if (!payload.aud) {\n      throw new JwtPayloadRequiresAud(payload);\n    }\n    const audiences = Array.isArray(payload.aud) ? payload.aud : [payload.aud];\n    const matched = audiences.some(\n      (payloadAud) => aud instanceof RegExp ? aud.test(payloadAud) : typeof aud === \"string\" ? payloadAud === aud : Array.isArray(aud) && aud.includes(payloadAud)\n    );\n    if (!matched) {\n      throw new JwtTokenAudience(aud, payload.aud);\n    }\n  }\n  const headerPayload = token.substring(0, token.lastIndexOf(\".\"));\n  const verified = await verifying(\n    publicKey,\n    alg,\n    decodeBase64Url(tokenParts[2]),\n    utf8Encoder.encode(headerPayload)\n  );\n  if (!verified) {\n    throw new JwtTokenSignatureMismatched(token);\n  }\n  return payload;\n};\nvar verifyWithJwks = async (token, options, init) => {\n  const verifyOpts = options.verification || {};\n  const header = decodeHeader(token);\n  if (!isTokenHeader(header)) {\n    throw new JwtHeaderInvalid(header);\n  }\n  if (!header.kid) {\n    throw new JwtHeaderRequiresKid(header);\n  }\n  if (options.jwks_uri) {\n    const response = await fetch(options.jwks_uri, init);\n    if (!response.ok) {\n      throw new Error(`failed to fetch JWKS from ${options.jwks_uri}`);\n    }\n    const data = await response.json();\n    if (!data.keys) {\n      throw new Error('invalid JWKS response. \"keys\" field is missing');\n    }\n    if (!Array.isArray(data.keys)) {\n      throw new Error('invalid JWKS response. \"keys\" field is not an array');\n    }\n    if (options.keys) {\n      options.keys.push(...data.keys);\n    } else {\n      options.keys = data.keys;\n    }\n  } else if (!options.keys) {\n    throw new Error('verifyWithJwks requires options for either \"keys\" or \"jwks_uri\" or both');\n  }\n  const matchingKey = options.keys.find((key) => key.kid === header.kid);\n  if (!matchingKey) {\n    throw new JwtTokenInvalid(token);\n  }\n  return await verify(token, matchingKey, {\n    alg: matchingKey.alg || header.alg,\n    ...verifyOpts\n  });\n};\nvar decode = (token) => {\n  try {\n    const [h, p] = token.split(\".\");\n    const header = decodeJwtPart(h);\n    const payload = decodeJwtPart(p);\n    return {\n      header,\n      payload\n    };\n  } catch {\n    throw new JwtTokenInvalid(token);\n  }\n};\nvar decodeHeader = (token) => {\n  try {\n    const [h] = token.split(\".\");\n    return decodeJwtPart(h);\n  } catch {\n    throw new JwtTokenInvalid(token);\n  }\n};\nexport {\n  decode,\n  decodeHeader,\n  isTokenHeader,\n  sign,\n  verify,\n  verifyWithJwks\n};\n", "// src/utils/jwt/index.ts\nimport { decode, sign, verify, verifyWithJwks } from \"./jwt.js\";\nvar Jwt = { sign, verify, decode, verifyWithJwks };\nexport {\n  Jwt\n};\n", "// src/middleware/jwt/jwt.ts\nimport { getCookie, getSignedCookie } from \"../../helper/cookie/index.js\";\nimport { HTTPException } from \"../../http-exception.js\";\nimport { Jwt } from \"../../utils/jwt/index.js\";\nimport \"../../context.js\";\nvar jwt = (options) => {\n  const verifyOpts = options.verification || {};\n  if (!options || !options.secret) {\n    throw new Error('JWT auth middleware requires options for \"secret\"');\n  }\n  if (!crypto.subtle || !crypto.subtle.importKey) {\n    throw new Error(\"`crypto.subtle.importKey` is undefined. JWT auth middleware requires it.\");\n  }\n  return async function jwt2(ctx, next) {\n    const headerName = options.headerName || \"Authorization\";\n    const credentials = ctx.req.raw.headers.get(headerName);\n    let token;\n    if (credentials) {\n      const parts = credentials.split(/\\s+/);\n      if (parts.length !== 2) {\n        const errDescription = \"invalid credentials structure\";\n        throw new HTTPException(401, {\n          message: errDescription,\n          res: unauthorizedResponse({\n            ctx,\n            error: \"invalid_request\",\n            errDescription\n          })\n        });\n      } else {\n        token = parts[1];\n      }\n    } else if (options.cookie) {\n      if (typeof options.cookie == \"string\") {\n        token = getCookie(ctx, options.cookie);\n      } else if (options.cookie.secret) {\n        if (options.cookie.prefixOptions) {\n          token = await getSignedCookie(\n            ctx,\n            options.cookie.secret,\n            options.cookie.key,\n            options.cookie.prefixOptions\n          );\n        } else {\n          token = await getSignedCookie(ctx, options.cookie.secret, options.cookie.key);\n        }\n      } else {\n        if (options.cookie.prefixOptions) {\n          token = getCookie(ctx, options.cookie.key, options.cookie.prefixOptions);\n        } else {\n          token = getCookie(ctx, options.cookie.key);\n        }\n      }\n    }\n    if (!token) {\n      const errDescription = \"no authorization included in request\";\n      throw new HTTPException(401, {\n        message: errDescription,\n        res: unauthorizedResponse({\n          ctx,\n          error: \"invalid_request\",\n          errDescription\n        })\n      });\n    }\n    let payload;\n    let cause;\n    try {\n      payload = await Jwt.verify(token, options.secret, {\n        alg: options.alg,\n        ...verifyOpts\n      });\n    } catch (e) {\n      cause = e;\n    }\n    if (!payload) {\n      throw new HTTPException(401, {\n        message: \"Unauthorized\",\n        res: unauthorizedResponse({\n          ctx,\n          error: \"invalid_token\",\n          statusText: \"Unauthorized\",\n          errDescription: \"token verification failure\"\n        }),\n        cause\n      });\n    }\n    ctx.set(\"jwtPayload\", payload);\n    await next();\n  };\n};\nfunction unauthorizedResponse(opts) {\n  return new Response(\"Unauthorized\", {\n    status: 401,\n    statusText: opts.statusText,\n    headers: {\n      \"WWW-Authenticate\": `Bearer realm=\"${opts.ctx.req.url}\",error=\"${opts.error}\",error_description=\"${opts.errDescription}\"`\n    }\n  });\n}\nvar verifyWithJwks = Jwt.verifyWithJwks;\nvar verify = Jwt.verify;\nvar decode = Jwt.decode;\nvar sign = Jwt.sign;\nexport {\n  decode,\n  jwt,\n  sign,\n  verify,\n  verifyWithJwks\n};\n", "/**\n * @license MIT <https://opensource.org/licenses/MIT>\n * @copyright Michael Hart 2024\n */\nconst encoder = new TextEncoder();\nconst HOST_SERVICES = {\n  appstream2: 'appstream',\n  cloudhsmv2: 'cloudhsm',\n  email: 'ses',\n  marketplace: 'aws-marketplace',\n  mobile: 'AWSMobileHubService',\n  pinpoint: 'mobiletargeting',\n  queue: 'sqs',\n  'git-codecommit': 'codecommit',\n  'mturk-requester-sandbox': 'mturk-requester',\n  'personalize-runtime': 'personalize',\n};\nconst UNSIGNABLE_HEADERS = new Set([\n  'authorization',\n  'content-type',\n  'content-length',\n  'user-agent',\n  'presigned-expires',\n  'expect',\n  'x-amzn-trace-id',\n  'range',\n  'connection',\n]);\nclass AwsClient {\n  constructor({ accessKeyId, secretAccessKey, sessionToken, service, region, cache, retries, initRetryMs }) {\n    if (accessKeyId == null) throw new TypeError('accessKeyId is a required option')\n    if (secretAccessKey == null) throw new TypeError('secretAccessKey is a required option')\n    this.accessKeyId = accessKeyId;\n    this.secretAccessKey = secretAccessKey;\n    this.sessionToken = sessionToken;\n    this.service = service;\n    this.region = region;\n    this.cache = cache || new Map();\n    this.retries = retries != null ? retries : 10;\n    this.initRetryMs = initRetryMs || 50;\n  }\n  async sign(input, init) {\n    if (input instanceof Request) {\n      const { method, url, headers, body } = input;\n      init = Object.assign({ method, url, headers }, init);\n      if (init.body == null && headers.has('Content-Type')) {\n        init.body = body != null && headers.has('X-Amz-Content-Sha256') ? body : await input.clone().arrayBuffer();\n      }\n      input = url;\n    }\n    const signer = new AwsV4Signer(Object.assign({ url: input.toString() }, init, this, init && init.aws));\n    const signed = Object.assign({}, init, await signer.sign());\n    delete signed.aws;\n    try {\n      return new Request(signed.url.toString(), signed)\n    } catch (e) {\n      if (e instanceof TypeError) {\n        return new Request(signed.url.toString(), Object.assign({ duplex: 'half' }, signed))\n      }\n      throw e\n    }\n  }\n  async fetch(input, init) {\n    for (let i = 0; i <= this.retries; i++) {\n      const fetched = fetch(await this.sign(input, init));\n      if (i === this.retries) {\n        return fetched\n      }\n      const res = await fetched;\n      if (res.status < 500 && res.status !== 429) {\n        return res\n      }\n      await new Promise(resolve => setTimeout(resolve, Math.random() * this.initRetryMs * Math.pow(2, i)));\n    }\n    throw new Error('An unknown error occurred, ensure retries is not negative')\n  }\n}\nclass AwsV4Signer {\n  constructor({ method, url, headers, body, accessKeyId, secretAccessKey, sessionToken, service, region, cache, datetime, signQuery, appendSessionToken, allHeaders, singleEncode }) {\n    if (url == null) throw new TypeError('url is a required option')\n    if (accessKeyId == null) throw new TypeError('accessKeyId is a required option')\n    if (secretAccessKey == null) throw new TypeError('secretAccessKey is a required option')\n    this.method = method || (body ? 'POST' : 'GET');\n    this.url = new URL(url);\n    this.headers = new Headers(headers || {});\n    this.body = body;\n    this.accessKeyId = accessKeyId;\n    this.secretAccessKey = secretAccessKey;\n    this.sessionToken = sessionToken;\n    let guessedService, guessedRegion;\n    if (!service || !region) {\n[guessedService, guessedRegion] = guessServiceRegion(this.url, this.headers);\n    }\n    this.service = service || guessedService || '';\n    this.region = region || guessedRegion || 'us-east-1';\n    this.cache = cache || new Map();\n    this.datetime = datetime || new Date().toISOString().replace(/[:-]|\\.\\d{3}/g, '');\n    this.signQuery = signQuery;\n    this.appendSessionToken = appendSessionToken || this.service === 'iotdevicegateway';\n    this.headers.delete('Host');\n    if (this.service === 's3' && !this.signQuery && !this.headers.has('X-Amz-Content-Sha256')) {\n      this.headers.set('X-Amz-Content-Sha256', 'UNSIGNED-PAYLOAD');\n    }\n    const params = this.signQuery ? this.url.searchParams : this.headers;\n    params.set('X-Amz-Date', this.datetime);\n    if (this.sessionToken && !this.appendSessionToken) {\n      params.set('X-Amz-Security-Token', this.sessionToken);\n    }\n    this.signableHeaders = ['host', ...this.headers.keys()]\n      .filter(header => allHeaders || !UNSIGNABLE_HEADERS.has(header))\n      .sort();\n    this.signedHeaders = this.signableHeaders.join(';');\n    this.canonicalHeaders = this.signableHeaders\n      .map(header => header + ':' + (header === 'host' ? this.url.host : (this.headers.get(header) || '').replace(/\\s+/g, ' ')))\n      .join('\\n');\n    this.credentialString = [this.datetime.slice(0, 8), this.region, this.service, 'aws4_request'].join('/');\n    if (this.signQuery) {\n      if (this.service === 's3' && !params.has('X-Amz-Expires')) {\n        params.set('X-Amz-Expires', '86400');\n      }\n      params.set('X-Amz-Algorithm', 'AWS4-HMAC-SHA256');\n      params.set('X-Amz-Credential', this.accessKeyId + '/' + this.credentialString);\n      params.set('X-Amz-SignedHeaders', this.signedHeaders);\n    }\n    if (this.service === 's3') {\n      try {\n        this.encodedPath = decodeURIComponent(this.url.pathname.replace(/\\+/g, ' '));\n      } catch (e) {\n        this.encodedPath = this.url.pathname;\n      }\n    } else {\n      this.encodedPath = this.url.pathname.replace(/\\/+/g, '/');\n    }\n    if (!singleEncode) {\n      this.encodedPath = encodeURIComponent(this.encodedPath).replace(/%2F/g, '/');\n    }\n    this.encodedPath = encodeRfc3986(this.encodedPath);\n    const seenKeys = new Set();\n    this.encodedSearch = [...this.url.searchParams]\n      .filter(([k]) => {\n        if (!k) return false\n        if (this.service === 's3') {\n          if (seenKeys.has(k)) return false\n          seenKeys.add(k);\n        }\n        return true\n      })\n      .map(pair => pair.map(p => encodeRfc3986(encodeURIComponent(p))))\n      .sort(([k1, v1], [k2, v2]) => k1 < k2 ? -1 : k1 > k2 ? 1 : v1 < v2 ? -1 : v1 > v2 ? 1 : 0)\n      .map(pair => pair.join('='))\n      .join('&');\n  }\n  async sign() {\n    if (this.signQuery) {\n      this.url.searchParams.set('X-Amz-Signature', await this.signature());\n      if (this.sessionToken && this.appendSessionToken) {\n        this.url.searchParams.set('X-Amz-Security-Token', this.sessionToken);\n      }\n    } else {\n      this.headers.set('Authorization', await this.authHeader());\n    }\n    return {\n      method: this.method,\n      url: this.url,\n      headers: this.headers,\n      body: this.body,\n    }\n  }\n  async authHeader() {\n    return [\n      'AWS4-HMAC-SHA256 Credential=' + this.accessKeyId + '/' + this.credentialString,\n      'SignedHeaders=' + this.signedHeaders,\n      'Signature=' + (await this.signature()),\n    ].join(', ')\n  }\n  async signature() {\n    const date = this.datetime.slice(0, 8);\n    const cacheKey = [this.secretAccessKey, date, this.region, this.service].join();\n    let kCredentials = this.cache.get(cacheKey);\n    if (!kCredentials) {\n      const kDate = await hmac('AWS4' + this.secretAccessKey, date);\n      const kRegion = await hmac(kDate, this.region);\n      const kService = await hmac(kRegion, this.service);\n      kCredentials = await hmac(kService, 'aws4_request');\n      this.cache.set(cacheKey, kCredentials);\n    }\n    return buf2hex(await hmac(kCredentials, await this.stringToSign()))\n  }\n  async stringToSign() {\n    return [\n      'AWS4-HMAC-SHA256',\n      this.datetime,\n      this.credentialString,\n      buf2hex(await hash(await this.canonicalString())),\n    ].join('\\n')\n  }\n  async canonicalString() {\n    return [\n      this.method.toUpperCase(),\n      this.encodedPath,\n      this.encodedSearch,\n      this.canonicalHeaders + '\\n',\n      this.signedHeaders,\n      await this.hexBodyHash(),\n    ].join('\\n')\n  }\n  async hexBodyHash() {\n    let hashHeader = this.headers.get('X-Amz-Content-Sha256') || (this.service === 's3' && this.signQuery ? 'UNSIGNED-PAYLOAD' : null);\n    if (hashHeader == null) {\n      if (this.body && typeof this.body !== 'string' && !('byteLength' in this.body)) {\n        throw new Error('body must be a string, ArrayBuffer or ArrayBufferView, unless you include the X-Amz-Content-Sha256 header')\n      }\n      hashHeader = buf2hex(await hash(this.body || ''));\n    }\n    return hashHeader\n  }\n}\nasync function hmac(key, string) {\n  const cryptoKey = await crypto.subtle.importKey(\n    'raw',\n    typeof key === 'string' ? encoder.encode(key) : key,\n    { name: 'HMAC', hash: { name: 'SHA-256' } },\n    false,\n    ['sign'],\n  );\n  return crypto.subtle.sign('HMAC', cryptoKey, encoder.encode(string))\n}\nasync function hash(content) {\n  return crypto.subtle.digest('SHA-256', typeof content === 'string' ? encoder.encode(content) : content)\n}\nconst HEX_CHARS = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\nfunction buf2hex(arrayBuffer) {\n  const buffer = new Uint8Array(arrayBuffer);\n  let out = '';\n  for (let idx = 0; idx < buffer.length; idx++) {\n    const n = buffer[idx];\n    out += HEX_CHARS[(n >>> 4) & 0xF];\n    out += HEX_CHARS[n & 0xF];\n  }\n  return out\n}\nfunction encodeRfc3986(urlEncodedStr) {\n  return urlEncodedStr.replace(/[!'()*]/g, c => '%' + c.charCodeAt(0).toString(16).toUpperCase())\n}\nfunction guessServiceRegion(url, headers) {\n  const { hostname, pathname } = url;\n  if (hostname.endsWith('.on.aws')) {\n    const match = hostname.match(/^[^.]{1,63}\\.lambda-url\\.([^.]{1,63})\\.on\\.aws$/);\n    return match != null ? ['lambda', match[1] || ''] : ['', '']\n  }\n  if (hostname.endsWith('.r2.cloudflarestorage.com')) {\n    return ['s3', 'auto']\n  }\n  if (hostname.endsWith('.backblazeb2.com')) {\n    const match = hostname.match(/^(?:[^.]{1,63}\\.)?s3\\.([^.]{1,63})\\.backblazeb2\\.com$/);\n    return match != null ? ['s3', match[1] || ''] : ['', '']\n  }\n  const match = hostname.replace('dualstack.', '').match(/([^.]{1,63})\\.(?:([^.]{0,63})\\.)?amazonaws\\.com(?:\\.cn)?$/);\n  let service = (match && match[1]) || '';\n  let region = match && match[2];\n  if (region === 'us-gov') {\n    region = 'us-gov-west-1';\n  } else if (region === 's3' || region === 's3-accelerate') {\n    region = 'us-east-1';\n    service = 's3';\n  } else if (service === 'iot') {\n    if (hostname.startsWith('iot.')) {\n      service = 'execute-api';\n    } else if (hostname.startsWith('data.jobs.iot.')) {\n      service = 'iot-jobs-data';\n    } else {\n      service = pathname === '/mqtt' ? 'iotdevicegateway' : 'iotdata';\n    }\n  } else if (service === 'autoscaling') {\n    const targetPrefix = (headers.get('X-Amz-Target') || '').split('.')[0];\n    if (targetPrefix === 'AnyScaleFrontendService') {\n      service = 'application-autoscaling';\n    } else if (targetPrefix === 'AnyScaleScalingPlannerFrontendService') {\n      service = 'autoscaling-plans';\n    }\n  } else if (region == null && service.startsWith('s3-')) {\n    region = service.slice(3).replace(/^fips-|^external-1/, '');\n    service = 's3';\n  } else if (service.endsWith('-fips')) {\n    service = service.slice(0, -5);\n  } else if (region && /-\\d$/.test(service) && !/-\\d$/.test(region)) {\n[service, region] = [region, service];\n  }\n  return [HOST_SERVICES[service] || service, region || '']\n}\n\nexport { AwsClient, AwsV4Signer };\n", "import { Hono } from 'hono'\nimport { sign, verify } from 'hono/jwt'\nimport { AwsClient } from 'aws4fetch'\n\nimport type { Env } from 'src/server/types'\nimport { User } from 'src/server/types'\n\nconst app = new Hono<{ Bindings: Env }>()\n\nconst checkPassword = async (password: string, hashedPassword: string): Promise<boolean> => {\n  const hash = await hashPassword(password)\n  return hash === hashedPassword\n}\n\nconst hashPassword = async (password: string): Promise<string> => {\n  const encoder = new TextEncoder()\n  const data = encoder.encode(password)\n  const hashBuffer = await crypto.subtle.digest('SHA-256', data)\n  const hashArray = Array.from(new Uint8Array(hashBuffer))\n  const hashHex = hashArray.map((b) => b.toString(16).padStart(2, '0')).join('')\n  return hashHex\n}\n\n// \u751F\u6210 S3 \u9884\u7B7E\u540D URL \u7684\u8F85\u52A9\u51FD\u6570\nconst generatePresignedUrl = async (avatarPath: string, env: Env): Promise<string> => {\n  try {\n    const aws = new AwsClient({\n      accessKeyId: env.B2_KEY_ID,\n      secretAccessKey: env.B2_APPLICATION_KEY,\n      service: 's3',\n      region: 'us-west-004',\n    })\n\n    // \u79FB\u9664\u5F00\u5934\u7684 / (\u5982\u679C\u5B58\u5728)\n    const filePath = avatarPath.startsWith('/') ? avatarPath.substring(1) : avatarPath\n\n    // \u6784\u5EFA S3 URL\n    const s3Url = `https://${env.B2_BUCKET_NAME}.${env.B2_ENDPOINT}/${filePath}`\n\n    // \u751F\u6210\u9884\u7B7E\u540D URL\uFF08\u6709\u6548\u671F 1 \u5C0F\u65F6 = 3600 \u79D2\uFF09\n    const signedRequest = await aws.sign(s3Url, {\n      method: 'GET',\n      aws: {\n        signQuery: true,\n      },\n    })\n\n    return signedRequest.url\n  } catch (error) {\n    console.error('Failed to generate signed URL:', error)\n    // \u5982\u679C\u7B7E\u540D\u5931\u8D25\uFF0C\u8FD4\u56DE\u516C\u5F00\u8BBF\u95EE URL\n    const filePath = avatarPath.startsWith('/') ? avatarPath.substring(1) : avatarPath\n    return `https://${env.B2_BUCKET_NAME}.${env.B2_ENDPOINT}/${filePath}`\n  }\n}\n\n// \u793A\u4F8B\uFF1A\u5065\u5EB7\u68C0\u67E5\napp.get('/list', (c) => c.json({ message: 'User API is working!' }))\n\napp.get('/getInfo', async (c) => {\n  const db = c.env.DB\n  const payload = await c.req.json<{ id: number }>()\n  const results = await db\n    .prepare(\n      'SELECT id, username, followers, followings, avatar, dynamicNum FROM users WHERE id = ?',\n    )\n    .bind(payload.id)\n    .first()\n  return c.json(results ?? [])\n})\n\napp.post('/login', async (c) => {\n  try {\n    const payload = await c.req.json<{ username: string; password: string }>()\n    if (!payload?.username || !payload?.password) {\n      return c.json({ error: 'username and password are required' }, 400)\n    }\n\n    const db = c.env.DB\n    if (!db) {\n      console.error('Database not available in environment')\n      return c.json({ message: '\u6570\u636E\u5E93\u8FDE\u63A5\u5931\u8D25' }, 500)\n    }\n\n    const result = await db\n      .prepare('SELECT password FROM users WHERE username = ?')\n      .bind(payload.username)\n      .first()\n\n    if (!result) {\n      return c.json({ message: '\u4E0D\u5B58\u5728\u8BE5\u7528\u6237' }, 401)\n    }\n    const hashedPassword = result.password as string\n    if (!(await checkPassword(payload.password, hashedPassword))) {\n      return c.json({ message: '\u5BC6\u7801\u9519\u8BEF' }, 401)\n    }\n    const userInfo = await db\n      .prepare(\n        'SELECT id, username, followers, followings, avatar, dynamicNum FROM users WHERE username = ?',\n      )\n      .bind(payload.username)\n      .first()\n\n    if (!userInfo) {\n      return c.json({ message: '\u83B7\u53D6\u7528\u6237\u4FE1\u606F\u5931\u8D25' }, 500)\n    }\n\n    // \u751F\u6210 S3 \u9884\u7B7E\u540D URL\n    let avatar = userInfo.avatar as string\n\n    // \u5982\u679C\u6709 avatar \u8DEF\u5F84\uFF0C\u751F\u6210\u9884\u7B7E\u540D URL\n    if (avatar) {\n      try {\n        avatar = await generatePresignedUrl(avatar, c.env)\n      } catch (error) {\n        console.error('Failed to generate signed URL:', error)\n        // \u5982\u679C\u7B7E\u540D\u5931\u8D25\uFF0C\u4F7F\u7528\u516C\u5F00\u8BBF\u95EE URL\n        const filePath = avatar.startsWith('/') ? avatar.substring(1) : avatar\n        avatar = `https://${c.env.B2_BUCKET_NAME}.${c.env.B2_ENDPOINT}/${filePath}`\n      }\n    } else {\n      // \u5982\u679C\u6CA1\u6709 avatar\uFF0C\u4F7F\u7528\u9ED8\u8BA4\u5934\u50CF\n      avatar = '/usersInfo/avatar/user_0.png'\n      try {\n        const aws = new AwsClient({\n          accessKeyId: c.env.B2_KEY_ID,\n          secretAccessKey: c.env.B2_APPLICATION_KEY,\n          service: 's3',\n          region: 'us-west-004',\n        })\n\n        const s3Url = `https://${c.env.B2_BUCKET_NAME}.${c.env.B2_ENDPOINT}/usersInfo/avatar/user_0.png`\n        const signedRequest = await aws.sign(s3Url, {\n          method: 'GET',\n          aws: {\n            signQuery: true,\n          },\n        })\n\n        avatar = signedRequest.url.toString()\n      } catch (error) {\n        console.error('Failed to generate default avatar signed URL:', error)\n        avatar = `https://${c.env.B2_BUCKET_NAME}.${c.env.B2_ENDPOINT}/usersInfo/avatar/user_0.png`\n      }\n    }\n\n    userInfo.avatar = avatar\n    const userResponse: User = {\n      userId: userInfo.id as number,\n      username: userInfo.username as string,\n      followers: (userInfo.followers as number) || 0,\n      following: (userInfo.followings as number) || 0,\n      avatar: (userInfo.avatar as string) || '/usersInfo/avatar/user_0.png',\n      dynamicNum: (userInfo.dynamicNum as number) || 0,\n      isLogin: true,\n    }\n\n    const token = await sign(\n      {\n        userId: userResponse.userId,\n        username: userResponse.username,\n        exp: Math.floor(Date.now() / 1000) + 60 * 60 * 24, // 24 hours\n      },\n      c.env.JWT_SECRET,\n    )\n\n    return c.json({ userResponse, token })\n  } catch (error) {\n    console.error('Login error:', error)\n    return c.json({ message: '\u670D\u52A1\u5668\u9519\u8BEF', error: String(error) }, 500)\n  }\n})\n\napp.post('/verifyToken', async (c) => {\n  console.log('Veify Token request received')\n\n  try {\n    const payload = await c.req.json<{ token: string }>()\n    if (!payload?.token) {\n      return c.json({ valid: false, message: 'Token is required' }, 400)\n    }\n\n    const decoded = await verify(payload.token, c.env.JWT_SECRET)\n\n    const db = c.env.DB\n    const userInfo = await db\n      .prepare(\n        'SELECT id, username, followers, followings, avatar, dynamicNum FROM users WHERE id = ?',\n      )\n      .bind(decoded.userId)\n      .first()\n\n    if (!userInfo) {\n      return c.json({ valid: false, message: 'User not found' }, 404)\n    }\n\n    let avatar = userInfo.avatar as string\n    if (!avatar) {\n      avatar = '/usersInfo/avatar/user_0.png'\n    }\n\n    avatar = await generatePresignedUrl(avatar, c.env)\n\n    const userResponse: User = {\n      userId: userInfo.id as number,\n      username: userInfo.username as string,\n      followers: (userInfo.followers as number) || 0,\n      following: (userInfo.followings as number) || 0,\n      avatar: avatar,\n      dynamicNum: (userInfo.dynamicNum as number) || 0,\n      isLogin: true,\n    }\n\n    return c.json({ valid: true, userResponse })\n  } catch (error) {\n    console.error('Verify Token error:', error)\n    return c.json({ valid: false, message: '\u65E0\u6548\u7684 Token \u6216\u9A8C\u8BC1\u5931\u8D25', error: String(error) }, 401)\n  }\n})\n\napp.post('/setUser', async (c) => {\n  try {\n    const payload = await c.req.json<{ username: string; password: string }>()\n    if (!payload?.username || !payload?.password) {\n      return c.json({ error: 'username and password are required' }, 400)\n    }\n    const db = c.env.DB\n    if (!db) {\n      console.error('Database not available in environment')\n      return c.json({ message: '\u6570\u636E\u5E93\u8FDE\u63A5\u5931\u8D25' }, 500)\n    }\n\n    await db\n      .prepare(\n        'INSERT INTO users (username, password, followers, followings, avatar, dynamicNum) VALUES (?, ?, ?, ?, ?, ?)',\n      )\n      .bind(\n        payload.username,\n        await hashPassword(payload.password),\n        0,\n        0,\n        '/usersInfo/avatar/user_0.png',\n        0,\n      )\n      .run()\n    const result = await db\n      .prepare('SELECT id FROM users WHERE username = ?')\n      .bind(payload.username)\n      .first()\n    if (!result) {\n      return c.json({ message: '\u7528\u6237\u521B\u5EFA\u5931\u8D25' }, 500)\n    }\n    const userResponse: User = {\n      userId: result.id as number,\n      username: payload.username,\n      followers: 0,\n      following: 0,\n      avatar: '/usersInfo/avatar/user_0.png',\n      dynamicNum: 0,\n      isLogin: true,\n    }\n    const jwtToken = await sign(\n      {\n        userId: userResponse.userId,\n        username: userResponse.username,\n        exp: Math.floor(Date.now() / 1000) + 60 * 60 * 24, // 24 hours\n      },\n      c.env.JWT_SECRET,\n    )\n    return c.json({ message: '\u6CE8\u518C\u6210\u529F', user: userResponse, token: jwtToken })\n  } catch (error) {\n    console.error('SetUser error:', error)\n    return c.json({ message: '\u670D\u52A1\u5668\u9519\u8BEF', error: String(error) }, 500)\n  }\n})\n// \u6839\u636E ID \u83B7\u53D6\u7528\u6237\u4FE1\u606F\n\nexport default app\n", "import { Hono } from 'hono'\nimport { AwsClient } from 'aws4fetch'\nimport type { Env } from 'src/server/types'\n\nconst app = new Hono<{ Bindings: Env }>()\n\n// \u8F85\u52A9\u51FD\u6570\uFF1A\u751F\u6210\u9884\u7B7E\u540D URL\nconst generatePresignedUrl = async (path: string, env: Env): Promise<string> => {\n  if (!path) return ''\n  if (path.startsWith('http')) return path\n\n  try {\n    const aws = new AwsClient({\n      accessKeyId: env.B2_KEY_ID,\n      secretAccessKey: env.B2_APPLICATION_KEY,\n      service: 's3',\n      region: 'us-west-004',\n    })\n\n    const filePath = path.startsWith('/') ? path.substring(1) : path\n    const s3Url = `https://${env.B2_BUCKET_NAME}.${env.B2_ENDPOINT}/${filePath}`\n\n    const signedRequest = await aws.sign(s3Url, {\n      method: 'GET',\n      aws: { signQuery: true },\n    })\n    return signedRequest.url\n  } catch (error) {\n    console.error('Failed to generate signed URL:', error)\n    const filePath = path.startsWith('/') ? path.substring(1) : path\n    return `https://${env.B2_BUCKET_NAME}.${env.B2_ENDPOINT}/${filePath}`\n  }\n}\n\n// \u53D1\u5E03\u6587\u7AE0\napp.post('/setArticle', async (c) => {\n  console.log('=== Set article request received ===')\n\n  try {\n    const header = c.req.header('Content-Type')\n    if (!header || !header.includes('multipart/form-data')) {\n      return c.json({ message: '\u4E0D\u652F\u6301\u7684\u5185\u5BB9\u7C7B\u578B' }, 415)\n    }\n    const body = await c.req.parseBody()\n    const userId = body.userId ? Number(body.userId) : null\n    const title = body.title as string\n    const content = body.content as string\n    const type = body.type as string\n    const abstract = body.abstract as string\n    const link = (body.link as string) || ''\n    const file = body.file\n\n    if (!userId || !title) {\n      return c.json({ message: '\u65E0\u6548\u7684\u8BF7\u6C42\u53C2\u6570' }, 400)\n    }\n\n    if (!(file instanceof File)) {\n      return c.json({ message: '\u7F3A\u5C11\u5C01\u9762\u6587\u4EF6' }, 400)\n    }\n\n    const db = c.env.DB\n    if (!db) {\n      return c.json({ message: '\u6570\u636E\u5E93\u8FDE\u63A5\u5931\u8D25' }, 500)\n    }\n    const user = await db.prepare('SELECT id FROM users WHERE id = ?').bind(userId).first()\n    if (!user) {\n      return c.json({ message: '\u7528\u6237Id\u9519\u8BEF' }, 401)\n    }\n    const aws = new AwsClient({\n      accessKeyId: c.env.B2_KEY_ID,\n      secretAccessKey: c.env.B2_APPLICATION_KEY,\n      service: 's3',\n      region: 'us-west-004',\n    })\n    const arrayBuffer = await file.arrayBuffer()\n    // \u4E0A\u4F20\u5C01\u9762\u5230 B2\n    const fileName = `cover_0.${file.name.split('.').pop()}`\n    const filePath = `articleCover/${fileName}`\n    const uploadUrl = `https://${c.env.B2_BUCKET_NAME}.${c.env.B2_ENDPOINT}/${filePath}`\n    console.log('Uploading cover to:', uploadUrl)\n\n    const uploadResponse = await aws.fetch(uploadUrl, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': file.type,\n      },\n      body: arrayBuffer,\n    })\n    console.log('Article insert result:')\n    if (!uploadResponse.ok) {\n      return c.json({ message: '\u5C01\u9762\u4E0A\u4F20\u5931\u8D25' }, 500)\n    }\n\n    // \u63D2\u5165\u6587\u7AE0\u8BB0\u5F55\n    const articleResult = await db\n      .prepare(\n        'INSERT INTO article (userId, content, title, type, abstract, likes, favorites, link, coverUrl) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)',\n      )\n      .bind(userId, content, title, type, abstract, 0, 0, link, filePath)\n      .run()\n\n    if (!articleResult.success) {\n      return c.json({ message: '\u6570\u636E\u5E93\u63D2\u5165\u5931\u8D25' }, 500)\n    }\n\n    return c.json({ message: '\u53D1\u5E03\u6210\u529F' }, 200)\n  } catch (error) {\n    console.error('SetArticle error:', error)\n    return c.json({ message: '\u670D\u52A1\u5668\u5185\u90E8\u9519\u8BEF', error: String(error) }, 500)\n  }\n})\n\n// \u83B7\u53D6\u6587\u7AE0\u8BE6\u60C5\napp.get('/specific/:id', async (c) => {\n  const id = c.req.param('id')\n  if (!id) return c.json({ message: '\u7F3A\u5C11\u6587\u7AE0id' }, 400)\n\n  const db = c.env.DB\n  try {\n    const article = await db\n      .prepare(\n        'SELECT id, userId, content, title, type, abstract, likes, favorites, link, coverUrl FROM article WHERE id = ?',\n      )\n      .bind(id)\n      .first()\n\n    if (!article) {\n      return c.json({ message: '\u672A\u627E\u5230\u5BF9\u5E94\u6587\u7AE0' }, 404)\n    }\n\n    const author = await db\n      .prepare('SELECT username, followers, followings, avatar, dynamicNum FROM users WHERE id = ?')\n      .bind(article.userId)\n      .first()\n\n    let coverUrl = '' as string\n    if (article.coverUrl === null) {\n      coverUrl = ''\n    } else {\n      coverUrl = article.coverUrl as string\n    }\n\n    if (coverUrl) {\n      if (coverUrl && !coverUrl.startsWith('http')) {\n        coverUrl = await generatePresignedUrl(coverUrl, c.env)\n        article.coverUrl = coverUrl\n      }\n    }\n\n    let avatar = author?.avatar as string\n    if (avatar && !avatar.startsWith('http')) {\n      avatar = await generatePresignedUrl(avatar, c.env)\n      author.avatar = avatar\n    }\n\n    return c.json({\n      ...article,\n      author: {\n        ...author,\n        avatar,\n      },\n    })\n  } catch (error) {\n    console.error('GetArticle error:', error)\n    return c.json({ message: '\u670D\u52A1\u5668\u5185\u90E8\u9519\u8BEF' }, 500)\n  }\n})\n\n// \u83B7\u53D6\u6587\u7AE0\u5217\u8868\napp.get('/list', async (c) => {\n  const db = c.env.DB\n  if (!db) {\n    console.error('Database connection failed')\n    return c.json({ message: '\u6570\u636E\u5E93\u8FDE\u63A5\u5931\u8D25' }, 500)\n  } else {\n    console.log('Database connection successful')\n  }\n  try {\n    const { results } = await db\n      .prepare(\n        'SELECT id, userId, content, title, type, abstract, likes, favorites, link, coverUrl FROM article ORDER BY id DESC LIMIT 4',\n      )\n      .all()\n    if (!results || results.length === 0) {\n      console.log('No articles found')\n\n      return c.json({ message: '\u6682\u65E0\u6587\u7AE0' }, 200)\n    }\n    const articles = []\n    for (const article of results) {\n      const author = await db\n        .prepare(\n          'SELECT username, followers, followings, avatar, dynamicNum FROM users WHERE id = ?',\n        )\n        .bind(article.userId)\n        .first()\n      if (!author) {\n        console.log(\n          `Author not found for article ${article.id as string}, userId: ${article.userId as string}`,\n        )\n        continue\n      }\n      let coverUrl = article.coverUrl as string\n      if (coverUrl && !coverUrl.startsWith('http')) {\n        coverUrl = await generatePresignedUrl(coverUrl, c.env)\n        article.coverUrl = coverUrl\n      }\n\n      let avatar = author?.avatar as string\n      if (avatar && !avatar.startsWith('http')) {\n        avatar = await generatePresignedUrl(avatar, c.env)\n        author.avatar = avatar\n      }\n\n      articles.push({\n        ...article,\n        author: { ...author },\n      })\n    }\n    return c.json(articles, 202)\n  } catch (error) {\n    console.error('GetArticleList error:', error)\n    return c.json({ message: '\u670D\u52A1\u5668\u5185\u90E8\u9519\u8BEF' }, 500)\n  }\n})\n\n// \u641C\u7D22\u6587\u7AE0\napp.post('/search', async (c) => {\n  try {\n    const { q } = await c.req.json<{ q: string }>()\n    const keyword = q?.trim()\n    const db = c.env.DB\n\n    const { results } = await db\n      .prepare(\n        'SELECT id, userId, content, title, type, abstract, likes, favorites, link FROM article WHERE title LIKE ? ORDER BY likes DESC, id DESC LIMIT 10',\n      )\n      .bind(`%${keyword}%`)\n      .all()\n\n    const articles = []\n    for (const article of results) {\n      const author = await db\n        .prepare(\n          'SELECT username, followers, followings, avatar, dynamicNum FROM users WHERE id = ?',\n        )\n        .bind(article.userId)\n        .first()\n\n      const cover = await db\n        .prepare('SELECT url FROM articleimg WHERE id = ? LIMIT 1')\n        .bind(article.id)\n        .first()\n      let coverUrl = (cover?.url as string) || ''\n      if (coverUrl && !coverUrl.startsWith('http')) {\n        coverUrl = await generatePresignedUrl(coverUrl, c.env)\n      }\n\n      let avatar = author?.avatar as string\n      if (avatar && !avatar.startsWith('http')) {\n        avatar = await generatePresignedUrl(avatar, c.env)\n      }\n\n      articles.push({\n        ...article,\n        cover: coverUrl,\n        author: { ...author, avatar },\n      })\n    }\n    return c.json(articles)\n  } catch (error) {\n    console.error('SearchArticle error:', error)\n    return c.json({ message: '\u670D\u52A1\u5668\u5185\u90E8\u9519\u8BEF' }, 500)\n  }\n})\n\n// \u70B9\u8D5E\napp.post('/like/:id', async (c) => {\n  const articleId = c.req.param('id')\n  const { userId } = await c.req.json<{ userId: number }>()\n  const db = c.env.DB\n\n  try {\n    await db\n      .prepare(\n        `\n            INSERT INTO likes (userId, articleId, likes) VALUES (?, ?, 1)\n            ON CONFLICT(userId, articleId) DO UPDATE SET likes = 1\n        `,\n      )\n      .bind(userId, articleId)\n      .run()\n\n    const result = await db\n      .prepare('SELECT likes FROM likes WHERE userId = ? AND articleId = ?')\n      .bind(userId, articleId)\n      .first()\n\n    if (result) {\n      const change = result.likes === 1 ? 1 : 0\n      await db\n        .prepare('UPDATE article SET likes = likes + ? WHERE id = ?')\n        .bind(change, articleId)\n        .run()\n    }\n    return c.json({ message: '\u64CD\u4F5C\u6210\u529F', islike: result?.likes })\n  } catch (error) {\n    console.error('LikeArticle error:', error)\n    return c.json({ error: '\u64CD\u4F5C\u5931\u8D25' }, 500)\n  }\n})\n\napp.post(`/removeLike/:id`, async (c) => {\n  const articleId = c.req.param('id')\n  const { userId } = await c.req.json<{ userId: number }>()\n  const db = c.env.DB\n\n  try {\n    const res = await db\n      .prepare(\n        `\n            UPDATE likes SET likes = 0 WHERE userId = ? AND articleId = ?\n        `,\n      )\n      .bind(userId, articleId)\n      .run()\n    if (res.success) {\n      const res = await db\n        .prepare('UPDATE article SET likes = likes - 1 WHERE id = ?')\n        .bind(articleId)\n        .run()\n      if (!res.success) {\n        return c.json({ error: '\u53D6\u6D88\u70B9\u8D5E\u5931\u8D25' }, 500)\n      }\n    }\n    return c.json({ message: '\u53D6\u6D88\u70B9\u8D5E\u6210\u529F', isLike: 0 })\n  } catch (error) {\n    console.error('UnlikeArticle error:', error)\n    return c.json({ error: '\u53D6\u6D88\u70B9\u8D5E\u5931\u8D25' }, 500)\n  }\n})\n\napp.post('/isLike/:id', async (c) => {\n  const articleId = c.req.param('id')\n  const { userId } = await c.req.json<{ userId: number }>()\n  const db = c.env.DB\n\n  try {\n    const result = await db\n      .prepare('SELECT likes FROM likes WHERE userId = ? AND articleId = ?')\n      .bind(userId, articleId)\n      .first()\n    const likes = result ? result.likes : 0\n    return c.json({ likes }, 200)\n  } catch (error) {\n    console.error('IsLikeArticle error:', error)\n    return c.json({ error: '\u67E5\u8BE2\u5931\u8D25' }, 500)\n  }\n})\n\n// \u6536\u85CF\napp.post('/favorite/:id', async (c) => {\n  const articleId = c.req.param('id')\n  const { userId } = await c.req.json<{ userId: number }>()\n  const db = c.env.DB\n\n  try {\n    const res = await db\n      .prepare(\n        `\n            INSERT INTO favorites (userId, ArticleId, favorites) VALUES (?, ?, 1)\n            ON CONFLICT(userId, ArticleId) DO UPDATE SET favorites = 1\n        `,\n      )\n      .bind(userId, articleId)\n      .run()\n\n    if (res.success) {\n      const res = await db\n        .prepare('UPDATE article SET favorites = favorites + 1 WHERE id = ?')\n        .bind(articleId)\n        .run()\n      if (!res.success) {\n        return c.json({ error: '\u6536\u85CF\u5931\u8D25' }, 501)\n      }\n    } else {\n      return c.json({ error: '\u6536\u85CF\u5931\u8D25' }, 501)\n    }\n    const result = await db\n      .prepare('SELECT favorites FROM favorites WHERE userId = ? AND ArticleId = ?')\n      .bind(userId, articleId)\n      .first()\n\n    return c.json({ message: '\u6536\u85CF\u6210\u529F', isFavorite: result.favorites ? result.favorites : 0 })\n  } catch (error) {\n    console.error('FavoriteArticle error:', error)\n    return c.json({ error: '\u6536\u85CF\u5931\u8D25' }, 510)\n  }\n})\n\napp.post('/removeFavorite/:id', async (c) => {\n  const articleId = c.req.param('id')\n  const { userId } = await c.req.json<{ userId: number }>()\n  const db = c.env.DB\n\n  try {\n    const res = await db\n      .prepare(\n        `\n            UPDATE favorites SET favorites = 0 WHERE userId = ? AND ArticleId = ?\n        `,\n      )\n      .bind(userId, articleId)\n      .run()\n    if (res.success) {\n      const res = await db\n        .prepare('UPDATE article SET favorites = favorites - 1 WHERE id = ?')\n        .bind(articleId)\n        .run()\n      if (!res.success) {\n        return c.json({ error: '\u53D6\u6D88\u6536\u85CF\u5931\u8D25' }, 500)\n      }\n    }\n    return c.json({ message: '\u53D6\u6D88\u6536\u85CF\u6210\u529F', isFavorite: 0 })\n  } catch (error) {\n    console.error('UnfavoriteArticle error:', error)\n    return c.json({ error: '\u53D6\u6D88\u6536\u85CF\u5931\u8D25' }, 500)\n  }\n})\n\napp.post('/isFavorite/:id', async (c) => {\n  const articleId = c.req.param('id')\n  const { userId } = await c.req.json<{ userId: number }>()\n  const db = c.env.DB\n\n  try {\n    const result = await db\n      .prepare('SELECT favorites FROM favorites WHERE userId = ? AND ArticleId = ?')\n      .bind(userId, articleId)\n      .first()\n\n    return c.json({ favorites: result?.favorites || 0 })\n  } catch (error) {\n    console.error('IsFavoriteArticle error:', error)\n    return c.json({ error: '\u67E5\u8BE2\u5931\u8D25' }, 500)\n  }\n})\n\napp.post(`/removeFavorite/:id`, async (c) => {\n  const articleId = c.req.param('id')\n  const { userId } = await c.req.json<{ userId: number }>()\n  const db = c.env.DB\n\n  try {\n    await db\n      .prepare(\n        `\n            UPDATE favorites SET favorites = 0 WHERE userId = ? AND ArticleId = ?\n        `,\n      )\n      .bind(userId, articleId)\n      .run()\n\n    return c.json({ message: '\u53D6\u6D88\u6536\u85CF\u6210\u529F' })\n  } catch (error) {\n    console.error('UnfavoriteArticle error:', error)\n    return c.json({ error: '\u53D6\u6D88\u6536\u85CF\u5931\u8D25' }, 500)\n  }\n})\n\n// \u67E5\u8BE2\u662F\u5426\u70B9\u8D5E\napp.post('/isLike/:id', async (c) => {\n  const articleId = c.req.param('id')\n  const { userId } = await c.req.json<{ userId: number }>()\n  const db = c.env.DB\n\n  const result = await db\n    .prepare('SELECT likes FROM likes WHERE userId = ? AND articleId = ?')\n    .bind(userId, articleId)\n    .first()\n  const likes = result ? result.likes : 0\n  const query = !!result\n\n  return c.json({ likes, query, userId })\n})\n\n// \u67E5\u8BE2\u662F\u5426\u6536\u85CF\napp.post('/isFavorite/:id', async (c) => {\n  const articleId = c.req.param('id')\n  const { userId } = await c.req.json<{ userId: number }>()\n  const db = c.env.DB\n\n  const result = await db\n    .prepare('SELECT favorites FROM favorites WHERE userId = ? AND articleId = ?')\n    .bind(userId, articleId)\n    .first()\n  const favorites = result ? result.favorites : 0\n\n  return c.json({ favorites })\n})\n\n// \u83B7\u53D6\u8BC4\u8BBA\napp.get('/comments/:id', async (c) => {\n  const articleId = c.req.param('id')\n  const db = c.env.DB\n\n  try {\n    const { results } = await db\n      .prepare(\n        `\n            SELECT c.*,\n                pc.userId as parent_user_id,\n                pc.userName as parent_user_name,\n                pc.userAvatar as parent_user_avatar\n            FROM comments c\n            LEFT JOIN comments pc ON c.parentId = pc.id\n            WHERE c.articleId = ?\n            ORDER BY c.rootId ASC, c.createdAt ASC\n        `,\n      )\n      .bind(articleId)\n      .all()\n\n    const comments = await Promise.all(\n      results.map(async (row) => {\n        let userAvatar = row.userAvatar as string\n        if (userAvatar && !userAvatar.startsWith('http')) {\n          userAvatar = await generatePresignedUrl(userAvatar, c.env)\n        }\n\n        let parentUserAvatar = row.parent_user_avatar as string\n        if (parentUserAvatar && !parentUserAvatar.startsWith('http')) {\n          parentUserAvatar = await generatePresignedUrl(parentUserAvatar, c.env)\n        }\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const comment: any = {\n          commentId: row.id,\n          content: row.content,\n          userId: row.userId,\n          userName: row.userName,\n          userAvatar: userAvatar,\n          articleId: row.articleId,\n          createdAt: row.createdAt,\n          parentId: row.parentId,\n          rootId: row.rootId,\n          parentUser: null,\n        }\n\n        if (row.parent_user_id) {\n          comment.parentUser = {\n            userId: row.parent_user_id,\n            userName: row.parent_user_name,\n            userAvatar: parentUserAvatar,\n          }\n        }\n        return comment\n      }),\n    )\n\n    return c.json(comments)\n  } catch (error) {\n    console.error('GetComments error:', error)\n    return c.json({ error: 'Failed to fetch comments' }, 500)\n  }\n})\n\n// \u6DFB\u52A0\u8BC4\u8BBA\napp.post('/addComment/:id', async (c) => {\n  try {\n    const input = await c.req.json<{\n      articleId: number\n      userId: number\n      userName: string\n      userAvatar: string\n      content: string\n      parentId?: number\n    }>()\n\n    const db = c.env.DB\n    const createdAt = new Date().toISOString()\n\n    const result = await db\n      .prepare(\n        'INSERT INTO comments (content, userId, userName, userAvatar, articleId, createdAt, parentId, rootId) VALUES (?, ?, ?, ?, ?, ?, ?, ?)',\n      )\n      .bind(\n        input.content,\n        input.userId,\n        input.userName,\n        input.userAvatar,\n        input.articleId,\n        createdAt,\n        input.parentId || null,\n        0,\n      )\n      .run()\n    if (!result.success) {\n      return c.json({ error: 'Failed to add comment' }, 500)\n    }\n    const commentId = result.meta.last_row_id\n    let rootId = commentId\n\n    if (input.parentId) {\n      const parent = await db\n        .prepare('SELECT rootId FROM comments WHERE id = ?')\n        .bind(input.parentId)\n        .first()\n      if (parent) {\n        rootId = parent.rootId as number\n      }\n    }\n\n    await db.prepare('UPDATE comments SET rootId = ? WHERE id = ?').bind(rootId, commentId).run()\n\n    return c.json(\n      {\n        comment: {\n          id: commentId,\n          articleId: input.articleId,\n          userId: input.userId,\n          userName: input.userName,\n          userAvatar: input.userAvatar,\n          content: input.content,\n          parentId: input.parentId,\n          rootId: rootId,\n          createdAt,\n        },\n      },\n      201,\n    )\n  } catch (error) {\n    console.error('AddComment error:', error)\n    return c.json({ error: String(error) }, 500)\n  }\n})\n\nexport default app\n", "import { AwsClient } from 'aws4fetch'\nimport { Hono } from 'hono'\n\nimport type { Env, UserFansInfo, UserFocusInfo, ArticleSimpleInfo } from 'src/server/types'\n\nconst app = new Hono<{ Bindings: Env }>()\nconst generatePresignedUrl = async (path: string, env: Env): Promise<string> => {\n  if (!path) return ''\n  if (path.startsWith('http')) return path\n\n  try {\n    const aws = new AwsClient({\n      accessKeyId: env.B2_KEY_ID,\n      secretAccessKey: env.B2_APPLICATION_KEY,\n      service: 's3',\n      region: 'us-west-004',\n    })\n\n    const filePath = path.startsWith('/') ? path.substring(1) : path\n    const s3Url = `https://${env.B2_BUCKET_NAME}.${env.B2_ENDPOINT}/${filePath}`\n\n    const signedRequest = await aws.sign(s3Url, {\n      method: 'GET',\n      aws: { signQuery: true },\n    })\n    return signedRequest.url\n  } catch (error) {\n    console.error('Failed to generate signed URL:', error)\n    const filePath = path.startsWith('/') ? path.substring(1) : path\n    return `https://${env.B2_BUCKET_NAME}.${env.B2_ENDPOINT}/${filePath}`\n  }\n}\n\nconst formatDateTime = (isoString: string): string => {\n  // \u5C06 \"2025-12-31T08:30:45.123Z\" \u8F6C\u6362\u4E3A \"2025-12-31 08:30:45\"\n  return isoString.replace('T', ' ').replace(/\\.\\d{3}Z$/, '')\n}\n\n// ...existing code...\napp.get('/getInfo/:id', async (c) => {\n  const userId = c.req.param('id')\n  if (!userId) {\n    return c.json({ error: 'request is invalid' }, 401)\n  }\n  const db = c.env.DB\n  const row = await db\n    .prepare(\n      'SELECT id, username, followers, followings, avatar, dynamicNum FROM users WHERE id = ?',\n    )\n    .bind(userId)\n    .first()\n\n  row.avatar = await generatePresignedUrl(row.avatar as string, c.env)\n  if (!row) {\n    return c.json({ error: 'User not found' }, 404)\n  }\n  return c.json(row)\n})\n\n// \u4E2A\u4EBA\u4FE1\u606F\u8BBE\u7F6E\napp.post(`/setting/:id`, async (c) => {\n  const userId = c.req.param('id')\n\n  // \u4F7F\u7528 parseBody \u5904\u7406 multipart/form-data\n  const body = await c.req.parseBody()\n\n  const db = c.env.DB\n  const updates = []\n  const values = []\n\n  // \u5904\u7406\u7528\u6237\u540D\u66F4\u65B0\n  if (body.username) {\n    updates.push('username = ?')\n    values.push(body.username)\n  }\n\n  // \u5904\u7406\u5BC6\u7801\u66F4\u65B0\n  if (body.password) {\n    updates.push('password = ?')\n    values.push(body.password)\n  }\n\n  // \u5904\u7406\u6587\u4EF6\u4E0A\u4F20\n  let avatarUrl = null\n  if (body.file instanceof File) {\n    const file = body.file\n    const fileBuffer = await file.arrayBuffer()\n    const fileName = `user_${userId}}.${file.name.split('.').pop()}`\n    const filePath = `usersInfo/avatar/${fileName}`\n\n    // \u4E0A\u4F20\u5230 B2\n    // \u8FD9\u91CC\u7684 URL \u5FC5\u987B\u662F S3 \u683C\u5F0F: https://<endpoint>/<bucket>/<key>\n    // \u4E0D\u80FD\u4F7F\u7528 /file/ (\u8FD9\u662F B2 Native API \u4E0B\u8F7D\u7528\u7684)\n    const uploadUrl = `https://${c.env.B2_ENDPOINT}/${c.env.B2_BUCKET_NAME}/${filePath}`\n    const uploadResponse = await fetch(uploadUrl, {\n      method: 'PUT',\n      headers: {\n        Authorization: `Basic ${btoa(`${c.env.B2_KEY_ID}:${c.env.B2_APPLICATION_KEY}`)}`,\n        'Content-Type': file.type,\n      },\n      body: fileBuffer,\n    })\n\n    if (uploadResponse.ok) {\n      avatarUrl = `https://${c.env.B2_BUCKET_NAME}.${c.env.B2_ENDPOINT}/${filePath}`\n      updates.push('avatar = ?')\n      values.push(avatarUrl)\n    } else {\n      return c.json({ flag: false, message: '\u5934\u50CF\u4E0A\u4F20\u5931\u8D25' }, 500)\n    }\n  }\n\n  // \u5982\u679C\u6CA1\u6709\u4EFB\u4F55\u66F4\u65B0\n  if (updates.length === 0) {\n    return c.json({ flag: false, message: '\u6CA1\u6709\u9700\u8981\u66F4\u65B0\u7684\u5185\u5BB9' }, 400)\n  }\n\n  // \u6267\u884C\u6570\u636E\u5E93\u66F4\u65B0\n  values.push(userId)\n  const sql = `UPDATE users SET ${updates.join(', ')} WHERE id = ?`\n\n  try {\n    await db\n      .prepare(sql)\n      .bind(...values)\n      .run()\n    return c.json({ flag: true, message: '\u66F4\u65B0\u6210\u529F', avatarUrl })\n  } catch (error) {\n    return c.json({ flag: false, message: '\u6570\u636E\u5E93\u66F4\u65B0\u5931\u8D25', error }, 500)\n  }\n})\n\n//\u589E\u52A0\u5173\u6CE8\napp.post(`/addFollow/:id`, async (c) => {\n  const payload = await c.req.json<{ follower: number; followee: number }>()\n  const followerId = payload.follower\n  const followeeId = payload.followee\n\n  if (followerId === followeeId) {\n    return c.json({ isFollow: true, message: '\u4E0D\u80FD\u5173\u6CE8\u81EA\u5DF1' }, 400)\n  }\n  const db = c.env.DB\n  try {\n    // \u5148\u68C0\u67E5\u662F\u5426\u5DF2\u7ECF\u5173\u6CE8\u8FC7\n    const existing = await db\n      .prepare('SELECT 1 FROM follows WHERE followerId = ? AND followeeId = ?')\n      .bind(followerId, followeeId)\n      .first()\n\n    if (existing) {\n      return c.json({ isFollow: true, message: '\u5DF2\u7ECF\u5173\u6CE8\u8FC7\u4E86' })\n    }\n\n    const sql = `INSERT INTO follows (followerId,followeeId) VALUES (?,?)`\n    const res = await db.prepare(sql).bind(followerId, followeeId).run()\n    if (res.success === true) {\n      // \u5173\u6CE8\u6210\u529F\u540E\uFF0C\u66F4\u65B0\u7528\u6237\u7684\u5173\u6CE8\u548C\u7C89\u4E1D\u6570\u91CF\n      const res1 = await db\n        .prepare('UPDATE users SET followings = followings + 1 WHERE id = ?')\n        .bind(followerId)\n        .run()\n      const res2 = await db\n        .prepare('UPDATE users SET followers = followers + 1 WHERE id = ?')\n        .bind(followeeId)\n        .run()\n      if (res1.success !== true || res2.success !== true) {\n        return c.json({ isFollow: false, message: '\u5173\u6CE8\u5931\u8D25' }, 500)\n      }\n    } else {\n      return c.json({ isFollow: false, message: '\u5173\u6CE8\u5931\u8D25' }, 500)\n    }\n    return c.json({ isFollow: true, message: '\u5173\u6CE8\u6210\u529F' })\n  } catch (err) {\n    console.error('addFollow error:', err)\n    return c.json({ isFollow: false, message: '\u5173\u6CE8\u5931\u8D25', error: String(err) }, 500)\n  }\n})\n\napp.post(`/removeFollow/:id`, async (c) => {\n  const payload = await c.req.json<{ follower: number; followee: number }>()\n  const followerId = payload.follower\n  const followeeId = payload.followee\n\n  if (followerId === followeeId) {\n    return c.json({ isFollow: false, message: '\u4E0D\u80FD\u53D6\u6D88\u5173\u6CE8\u81EA\u5DF1' }, 400)\n  }\n  const db = c.env.DB\n  try {\n    const sql = `DELETE FROM follows WHERE followerId = ? AND followeeId = ?`\n    const res = await db.prepare(sql).bind(followerId, followeeId).run()\n    if (res.success === true) {\n      // \u53D6\u6D88\u5173\u6CE8\u6210\u529F\u540E\uFF0C\u66F4\u65B0\u7528\u6237\u7684\u5173\u6CE8\u548C\u7C89\u4E1D\u6570\u91CF\n      const res1 = await db\n        .prepare('UPDATE users SET followings = followings - 1 WHERE id = ? AND followings > 0')\n        .bind(followerId)\n        .run()\n      const res2 = await db\n        .prepare('UPDATE users SET followers = followers - 1 WHERE id = ? AND followers > 0')\n        .bind(followeeId)\n        .run()\n      if (res1.success !== true || res2.success !== true) {\n        return c.json({ isFollow: true, message: '\u53D6\u6D88\u5173\u6CE8\u5931\u8D25' }, 500)\n      }\n    } else {\n      return c.json({ isFollow: true, message: '\u53D6\u6D88\u5173\u6CE8\u5931\u8D25' }, 500)\n    }\n    return c.json({ isFollow: false, message: '\u53D6\u6D88\u5173\u6CE8\u6210\u529F' })\n  } catch (err) {\n    console.error('removeFollow error:', err)\n    return c.json({ isFollow: true, message: '\u53D6\u6D88\u5173\u6CE8\u5931\u8D25', error: String(err) }, 500)\n  }\n})\n\napp.get(`/followList/:id`, async (c) => {\n  const userId = c.req.param('id')\n  if (!userId) {\n    return c.json({ error: 'Missing userId parameter' }, 400)\n  }\n  const db = c.env.DB\n  try {\n    const sql = `SELECT followeeId FROM followes WHERE followerId = ?`\n    const result = await db.prepare(sql).bind(userId).all()\n    const followeeIds = result.results.map((row) => row.followeeId)\n    const followees: UserFocusInfo[] = []\n    for (let i = 0; i < followeeIds.length; i++) {\n      const followeeRow = await db\n        .prepare('SELECT id, username, avatar FROM users WHERE id = ?')\n        .bind(followeeIds[i])\n        .first()\n      if (followeeRow) {\n        let filePath: string = ''\n        if (followeeRow.avatar && typeof followeeRow.avatar === 'string') {\n          filePath = followeeRow.avatar\n        }\n        followeeRow.avatar = await generatePresignedUrl(filePath, c.env)\n        followees.push({\n          userId: followeeRow.id as number,\n          userName: followeeRow.username as string,\n          avatar: followeeRow.avatar as string,\n          isFollow: true,\n        })\n      } else {\n        return c.json({ error: 'Failed to fetch followee user data' }, 502)\n      }\n    }\n\n    return c.json(followees)\n  } catch (err) {\n    console.error('followList error:', err)\n    return c.json({ error: 'Failed to fetch follow list', details: String(err) }, 500)\n  }\n})\n\napp.get(`/followerList/:id`, async (c) => {\n  const userId = c.req.param('id')\n  if (!userId) {\n    return c.json({ error: 'Missing userId parameter' }, 400)\n  }\n  try {\n    const db = c.env.DB\n    if (!db) {\n      return c.json({ error: 'Database connection not available' }, 501)\n    }\n    const followerRes = await db\n      .prepare('SELECT followerId FROM followes WHERE followeeId = ?')\n      .bind(userId)\n      .all()\n    const followerIds = followerRes.results.map((row) => row.followerId)\n    const followers: UserFansInfo[] = []\n    const followeeRes = await db\n      .prepare('SELECT followeeId FROM followes WHERE followerId = ?')\n      .bind(userId)\n      .all()\n    const followeeIds = followeeRes.results.map((row) => row.followeeId)\n    for (let i = 0; i < followerIds.length; i++) {\n      const followerRow = await db\n        .prepare('SELECT id, username, avatar FROM users WHERE id = ?')\n        .bind(followerIds[i])\n        .first()\n\n      if (!followerRow) {\n        return c.json({ error: 'Failed to fetch follower user data' }, 502)\n      }\n      if (followerRow) {\n        let filePath: string = ''\n        if (followerRow.avatar && typeof followerRow.avatar === 'string') {\n          filePath = followerRow.avatar\n        }\n        if (filePath) {\n          followerRow.avatar = await generatePresignedUrl(filePath, c.env)\n        }\n        followers.push({\n          userId: followerRow.id as number,\n          userName: followerRow.username as string,\n          avatar: followerRow.avatar as string,\n          isFollow: followeeIds.includes(followerRow.id as number),\n        })\n      }\n    }\n  } catch (error) {\n    console.error('followerList error:', error)\n    return c.json({ error: 'Failed to fetch follower list', details: String(error) }, 510)\n  }\n})\n\napp.get('/getFavoritesArticles/:id', async (c) => {\n  const userId = c.req.param('id')\n  if (!userId) {\n    return c.json({ error: 'Missing userId parameter' }, 401)\n  }\n  const db = c.env.DB\n  if (!db) {\n    return c.json({ error: 'Database connection not available' }, 502)\n  }\n  const res = await db\n    .prepare('SELECT articleId FROM favorites WHERE userId = ? AND favorites = 1')\n    .bind(userId)\n    .all()\n  const articleIds = res.results.map((row) => row.articleId)\n  const articles: ArticleSimpleInfo[] = []\n  for (const articleId of articleIds) {\n    const article = await db\n      .prepare('SELECT id, title, content FROM article WHERE id = ?')\n      .bind(articleId)\n      .first()\n    let coverUrl: string = ''\n    if (article && article.coverUrl && typeof article.coverUrl === 'string') {\n      coverUrl = article.coverUrl ? article.coverUrl : ''\n      article.coverUrl = await generatePresignedUrl(coverUrl, c.env)\n    }\n    if (article) {\n      articles.push({\n        id: article.id as number,\n        title: article.title as string,\n        abstract: article.content as string,\n        coverUrl: article.coverUrl as string,\n      })\n    }\n  }\n  return c.json(articles)\n})\n\napp.get('/getLikeArticles/:id', async (c) => {\n  const userId = c.req.param('id')\n  if (!userId) {\n    return c.json({ error: 'Missing userId parameter' }, 401)\n  }\n  const db = c.env.DB\n  if (!db) {\n    return c.json({ error: 'Database connection not available' }, 502)\n  }\n  const res = await db\n    .prepare('SELECT articleId FROM likes WHERE userId = ? AND likes = 1')\n    .bind(userId)\n    .all()\n  const articleIds = res.results.map((row) => row.articleId)\n  const articles: ArticleSimpleInfo[] = []\n  for (const articleId of articleIds) {\n    const article = await db\n      .prepare('SELECT id, title, content, coverUrl FROM article WHERE id = ?')\n      .bind(articleId)\n      .first()\n    let coverUrl: string = ''\n    if (article && article.coverUrl && typeof article.coverUrl === 'string') {\n      coverUrl = article.coverUrl ? article.coverUrl : ''\n      coverUrl = await generatePresignedUrl(coverUrl, c.env)\n      article.coverUrl = coverUrl\n    }\n    if (article) {\n      articles.push({\n        id: article.id as number,\n        title: article.title as string,\n        abstract: article.content as string,\n        coverUrl: article.coverUrl as string,\n      })\n    }\n  }\n  return c.json(articles, 200)\n})\n\napp.post('/addHistory', async (c) => {\n  const payload = await c.req.json<{ userId: number; articleId: number; viewTime: string }>()\n  if (!payload.userId || !payload.articleId || !payload.viewTime) {\n    return c.json({ flag: false, message: '\u7F3A\u5C11\u5FC5\u8981\u53C2\u6570' }, 401)\n  }\n  const userId = payload.userId\n  const articleId = payload.articleId\n  let viewTime = payload.viewTime\n  viewTime = formatDateTime(viewTime)\n  const db = c.env.DB\n  if (!db) {\n    return c.json({ error: 'Database connection not available' }, 502)\n  }\n  try {\n    await db\n      .prepare(\n        'INSERT INTO history (userId, articleId, time) VALUES (?, ?, ?) ON CONFLICT(userId, articleId) DO UPDATE SET time = excluded.time',\n      )\n      .bind(userId, articleId, viewTime)\n      .run()\n    return c.json({ flag: true, message: '\u6DFB\u52A0\u5386\u53F2\u8BB0\u5F55\u6210\u529F' })\n  } catch (error) {\n    console.error('addHistory error:', error)\n    return c.json({ flag: false, message: '\u6DFB\u52A0\u5386\u53F2\u8BB0\u5F55\u5931\u8D25', details: String(error) }, 510)\n  }\n})\n\napp.get('/getHistory/:id', async (c) => {\n  const userId = c.req.param('id')\n  if (!userId) {\n    return c.json({ error: 'Missing userId parameter' }, 401)\n  }\n  const db = c.env.DB\n  if (!db) {\n    return c.json({ error: 'Database connection not available' }, 502)\n  }\n  const res = await db\n    .prepare('SELECT articleId FROM history WHERE userId = ? ORDER BY time DESC')\n    .bind(userId)\n    .all()\n  const articleIds = res.results.map((row) => row.articleId)\n  const articles: ArticleSimpleInfo[] = []\n  for (const articleId of articleIds) {\n    const article = await db\n      .prepare('SELECT id, title, content, coverUrl FROM article WHERE id = ?')\n      .bind(articleId)\n      .first()\n    let coverUrl: string = ''\n    if (article && article.coverUrl && typeof article.coverUrl === 'string') {\n      coverUrl = article.coverUrl ? article.coverUrl : ''\n      article.coverUrl = await generatePresignedUrl(coverUrl, c.env)\n    }\n    if (article) {\n      articles.push({\n        id: article.id as number,\n        title: article.title as string,\n        abstract: article.content as string,\n        coverUrl: article.coverUrl as string,\n      })\n    }\n  }\n  return c.json(articles)\n})\n\napp.post()\nexport default app\n", "import { Hono } from 'hono'\nimport { AwsClient } from 'aws4fetch'\n\nimport { Env } from '../types'\nconst app = new Hono<{ Bindings: Env }>()\napp.get('/list', (c) => c.json({ message: 'User API is working!' }))\napp.post('/upload', async (c) => {\n  const contentType = c.req.header('Content-Type')\n  if (!contentType || !contentType.includes('multipart/form-data')) {\n    return c.json({ error: 'Unsupported content type' }, 415)\n  }\n\n  try {\n    // \u4F7F\u7528 parseBody \u5904\u7406 multipart/form-data\n    const body = await c.req.parseBody()\n    console.log('Parsed body keys:', Object.keys(body))\n    console.log('body.file type:', typeof body.file, body.file instanceof File)\n\n    if (!body.file) {\n      return c.json(\n        {\n          error: 'No file provided',\n          availableFields: Object.keys(body),\n        },\n        400,\n      )\n    }\n\n    if (!(body.file instanceof File)) {\n      return c.json(\n        {\n          error: 'Invalid file type',\n          receivedType: typeof body.file,\n        },\n        400,\n      )\n    }\n\n    const file = body.file\n    const arrayBuffer = await file.arrayBuffer()\n\n    const fileName = `user_0.${file.name.split('.').pop()}`\n    const filePath = `usersInfo/avatar/${fileName}`\n\n    const aws = new AwsClient({\n      accessKeyId: c.env.B2_KEY_ID, // Application Key ID\n      secretAccessKey: c.env.B2_APPLICATION_KEY, // Application Key\n      service: 's3',\n      region: 'us-west-004', // \u6539\u6210\u4F60\u7684 bucket \u6240\u5728 region\n    })\n\n    // \u4F7F\u7528\u6B63\u786E\u7684 endpoint \u683C\u5F0F\n    const uploadUrl = `https://${c.env.B2_BUCKET_NAME}.${c.env.B2_ENDPOINT}/${filePath}`\n    console.log('Upload URL:', uploadUrl)\n\n    const uploadResponse = await aws.fetch(uploadUrl, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': file.type,\n      },\n      body: arrayBuffer,\n    })\n\n    if (uploadResponse.ok) {\n      console.log('File uploaded successfully')\n      return c.json({ message: 'File uploaded successfully' }, 202)\n    } else {\n      const errorText = await uploadResponse.text()\n      console.log('Upload failed:', uploadResponse.status, errorText)\n      return c.json(\n        {\n          error: 'Upload failed',\n          status: uploadResponse.status,\n          details: errorText,\n        },\n        500,\n      )\n    }\n  } catch (error) {\n    console.log('Upload error:', error)\n    return c.json(\n      {\n        error: 'Internal Server Error',\n        message: error instanceof Error ? error.message : String(error),\n      },\n      500,\n    )\n  }\n})\n\nexport default app\n", "import { Hono } from 'hono'\nimport { cors } from 'hono/cors'\nimport type { Env } from 'src/server/types' // \u5BFC\u5165\u5171\u4EAB\u7C7B\u578B\n\n// \u5BFC\u5165API \u6A21\u5757\nimport usersApi from 'src/server/users' // \u9ED8\u8BA4\u5BFC\u5165 index.ts\nimport articleApi from 'src/server/article/index' // \u5BFC\u5165\u6587\u7AE0\u76F8\u5173API\nimport personalApi from 'src/server/personal/index' // \u5BFC\u5165\u4E2A\u4EBA\u4FE1\u606FAPI\nimport testApi from 'src/server/test/index' // \u5BFC\u5165\u6D4B\u8BD5API\n\n// \u521D\u59CB\u5316\u4E3B Hono \u5E94\u7528 (\u4E0D\u4F7F\u7528 basePath)\nconst app = new Hono<{ Bindings: Env }>()\n\napp.use(\n  '/*',\n  cors({\n    origin: 'http://localhost:9000', // \u6307\u5B9A\u5177\u4F53\u7684\u6E90,\u4E0D\u80FD\u4F7F\u7528\u901A\u914D\u7B26\n    allowMethods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],\n    allowHeaders: ['Content-Length', 'Content-Type', 'Authorization'], // \u6DFB\u52A0 Authorization\n    exposeHeaders: ['Content-Length', 'Content-Type'],\n    maxAge: 600,\n    credentials: true,\n  }),\n)\n\napp.route('/user', usersApi)\napp.route('/article', articleApi) // \u6587\u7AE0\u8DEF\u7531\u76F4\u63A5\u6302\u8F7D\u5728\u6839\u8DEF\u5F84\napp.route('/personal', personalApi) // \u4E2A\u4EBA\u8DEF\u7531\u76F4\u63A5\u6302\u8F7D\u5728\u6839\u8DEF\u5F84\napp.route('/test', testApi) // \u6D4B\u8BD5\u8DEF\u7531\u76F4\u63A5\u6302\u8F7D\u5728\u6839\u8DEF\u5F84\nexport default {\n  fetch: (req, env, ctx) => app.fetch(req, env, ctx),\n}\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"E:\\\\PracticalTraining\\\\quasar-project\\\\functions\\\\_worker.ts\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"C:\\\\Users\\\\29151\\\\AppData\\\\Local\\\\pnpm\\\\global\\\\5\\\\.pnpm\\\\wrangler@4.51.0\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"C:\\\\Users\\\\29151\\\\AppData\\\\Local\\\\pnpm\\\\global\\\\5\\\\.pnpm\\\\wrangler@4.51.0\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"E:\\\\PracticalTraining\\\\quasar-project\\\\functions\\\\_worker.ts\";\n\t\t\t\tconst MIDDLEWARE_TEST_INJECT = \"__INJECT_FOR_TESTING_WRANGLER_MIDDLEWARE__\";\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"E:\\\\PracticalTraining\\\\quasar-project\\\\.wrangler\\\\tmp\\\\bundle-Tuzo8f\\\\middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"C:\\\\Users\\\\29151\\\\AppData\\\\Local\\\\pnpm\\\\global\\\\5\\\\.pnpm\\\\wrangler@4.51.0\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\common.ts\";\nimport type { WorkerEntrypointConstructor } from \"E:\\\\PracticalTraining\\\\quasar-project\\\\.wrangler\\\\tmp\\\\bundle-Tuzo8f\\\\middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"E:\\\\PracticalTraining\\\\quasar-project\\\\.wrangler\\\\tmp\\\\bundle-Tuzo8f\\\\middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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",
  "names": ["match", "raw", "app", "Node", "Node", "Hono", "verifyWithJwks", "verify", "decode", "sign", "match", "Hono", "hash", "encoder", "sign", "verify", "app", "Hono", "generatePresignedUrl", "res", "app", "Hono", "generatePresignedUrl", "app", "Hono", "app", "Hono"]
}
